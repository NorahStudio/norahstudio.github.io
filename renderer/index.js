(()=>{var t={9550:t=>{t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},6601:t=>{t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},6820:t=>{t.exports=function(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t}},8854:t=>{t.exports=function(t,e,r){return t[0]=e,t[1]=r,t}},3650:t=>{t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},582:(t,e,r)=>{var n=r(9550),o=r(8854),i=r(6820),a=r(3650),s=r(6601),u=[0,0];t.exports.computeMiter=function(t,e,r,a,c){return n(t,r,a),i(t,t),o(e,-t[1],t[0]),o(u,-r[1],r[0]),c/s(e,u)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,r){return a(t,e,r),i(t,t),t}},4773:(t,e,r)=>{var n=r(582),o=[0,0],i=[0,0],a=[0,0],s=[0,0];function u(t,e,r){t.push([[e[0],e[1]],r])}t.exports=function(t,e){var r=null,c=[];e&&(t=t.slice()).push(t[0]);for(var l=t.length,h=1;h<l;h++){var d=t[h-1],f=t[h],p=h<t.length-1?t[h+1]:null;if(n.direction(o,f,d),r||(r=[0,0],n.normal(r,o)),1===h&&u(c,r,1),p){n.direction(i,p,f);var _=n.computeMiter(a,s,o,i,1);u(c,s,_)}else n.normal(r,o),u(c,r,1)}if(t.length>2&&e){var m=t[l-2],g=t[0],y=t[1];n.direction(o,g,m),n.direction(i,y,g),n.normal(r,o);var v=n.computeMiter(a,s,o,i,1);c[0][0]=s.slice(),c[l-1][0]=s.slice(),c[0][1]=v,c[l-1][1]=v,c.pop()}return c}},3466:function(t){var e;t.exports=((e=function(){function t(t){return o.appendChild(t.dom),t}function r(t){for(var e=0;e<o.children.length;e++)o.children[e].style.display=e===t?"block":"none";n=t}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(t){t.preventDefault(),r(++n%o.children.length)}),!1);var i=(performance||Date).now(),a=i,s=0,u=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:t,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(c.update(t-i,200),t>a+1e3&&(u.update(1e3*s/(t-a),100),a=t,s=0,l)){var e=performance.memory;l.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){i=this.end()},domElement:o,setMode:r}}).Panel=function(t,e,r){var n=1/0,o=0,i=Math.round,a=i(window.devicePixelRatio||1),s=80*a,u=48*a,c=3*a,l=2*a,h=3*a,d=15*a,f=74*a,p=30*a,_=document.createElement("canvas");_.width=s,_.height=u,_.style.cssText="width:80px;height:48px";var m=_.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=r,m.fillRect(0,0,s,u),m.fillStyle=e,m.fillText(t,c,l),m.fillRect(h,d,f,p),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(h,d,f,p),{dom:_,update:function(u,g){n=Math.min(n,u),o=Math.max(o,u),m.fillStyle=r,m.globalAlpha=1,m.fillRect(0,0,s,d),m.fillStyle=e,m.fillText(i(u)+" "+t+" ("+i(n)+"-"+i(o)+")",c,l),m.drawImage(_,h+a,d,f-a,p,h,d,f-a,p),m.fillRect(h+f-a,d,a,p),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(h+f-a,d,a,i((1-u/g)*p))}}},e)},5141:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ENABLE_VIEWPORT_ROTATION=e.USE_PRESERVE_DRAWING_BUFFER=e.PIXEL_PERFECT=e.MIN_ZOOM_SCALE=e.MAX_ZOOM_SCALE=e.ZOOM_OUT_RATIO=e.ZOOM_IN_RATIO=void 0,e.ZOOM_IN_RATIO=.07,e.ZOOM_OUT_RATIO=-.07,e.MAX_ZOOM_SCALE=256,e.MIN_ZOOM_SCALE=.03,e.PIXEL_PERFECT=!0,e.USE_PRESERVE_DRAWING_BUFFER=!1,e.ENABLE_VIEWPORT_ROTATION=!0},9415:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FillType=e.StrokeType=void 0;var o,i,a=n(r(8139)),s=n(r(6731)),u=n(r(9767)),c=n(r(6433)),l=r(3088),h=r(9950),d=r(4148);!function(t){t.SOLID="SOLID",t.LINEAR="LINEAR",t.BACKGROUND_IMAGE="BACKGROUND_IMAGE"}(o=e.StrokeType||(e.StrokeType={})),function(t){t.SOLID="SOLID",t.LINEAR="LINEAR",t.IMAGE="IMAGE",t.BACKGROUND_IMAGE="BACKGROUND_IMAGE"}(i=e.FillType||(e.FillType={}));var f=function(){function t(t,e){this._gl=t,this._resourceLoader=e,this._id=(0,h.uuidv4)(),this._x=0,this._y=0,this.zIndex=0,this._width=0,this._height=0,this._rotation=0,this._fills=[],this._strokes=[],this._effects=[],this._localTransform=[],this._absolute=[],this._fillPath=[],this._fillPathCount=0,this._strokePath=[],this._strokePathCount=0,this._strokeWidth=0,this._strokePosition=l.StrokePosition.CENTER,this._parent=void 0,this._children=[]}return t.prototype.setX=function(t){this._x=t,this.updateLocalTransform()},t.prototype.setY=function(t){this._y=t,this.updateLocalTransform()},t.prototype.setWidth=function(t){this._width=t,this.updateLocalTransform()},t.prototype.getWidth=function(){return this._width},t.prototype.setHeight=function(t){this._height=t,this.updateLocalTransform()},t.prototype.getHeight=function(){return this._height},t.prototype.getRotation=function(){return this._rotation},t.prototype.setRotation=function(t){var e=(0,l.getReferencePointWithRotation)(this._x,this._y,this._width,this._height,this._rotation,t),r=e.x,n=e.y;this._rotation=t,this._x=r,this._y=n,this.updateLocalTransform()},t.prototype.setDimension=function(t){var e=t.x,r=t.y,n=t.width,o=t.height,i=t.rotation;void 0!==e&&(this._x=e),void 0!==r&&(this._y=r),void 0!==n&&(this._width=n),void 0!==o&&(this._height=o),void 0!==i&&(this._rotation=i),this.updateLocalTransform()},t.prototype.updateLocalTransform=function(){var t=h.m4.translation(this._x,this._y,this.zIndex);this._rotation&&(t=h.m4.zRotate(t,(0,h.degToRad)(this._rotation))),this._localTransform=t,this._absolute=this._localTransform,this._parent&&this._parent._localTransform&&(this._absolute=h.m4.multiply(this._parent._absolute,this._absolute));for(var e=0;e<this._fills.length;e++){var r=this._fills[e];d.TypeChecker.checkExists(r.shader).setLocalTransform(this._absolute)}for(e=0;e<this._strokes.length;e++){var n=this._strokes[e];d.TypeChecker.checkExists(n.shader).setLocalTransform(this._absolute)}},t.prototype.setParent=function(t){this._parent=t,this.updateLocalTransform()},t.prototype.prepareVertex=function(){if(this.updateFillPath(),this._fillArray)for(var t=0;t<this._fills.length;t++){var e=this._fills[t];d.TypeChecker.checkState(null!=e.shader),e.shader.setPositionVertices(this._fillArray),e.shader.setPathCount(this._fillPathCount),e.shader.setPrimitiveType(this._gl.TRIANGLE_FAN),e.shader.setLocalTransform(this._absolute),("IMAGE"===e.type||"BACKGROUND_IMAGE"===e.type)&&(null==(n=this._resourceLoader.getResource(e.resourceId))?void 0:n.texture)&&e.shader.setTexture(n.texture)}if(this.updateStrokePath(),this._strokeArray)for(t=0;t<this._strokes.length;t++){var r=this._strokes[t];if(d.TypeChecker.checkState(null!=r.shader),r.shader.setPositionVertices(this._strokeArray),r.shader.setPathCount(this._strokePathCount),r.shader.setPrimitiveType(this._gl.TRIANGLE_STRIP),r.shader.setLocalTransform(this._absolute),"BACKGROUND_IMAGE"===r.type){var n=this._resourceLoader.getResource(r.resourceId);r.shader.setTexture(d.TypeChecker.checkExists(n).texture)}}},t.prototype.render=function(t){this.renderFills(t),this.renderStrokes(t)},t.prototype.addFill=function(t){var e=this._gl;switch(t.type){case i.SOLID:t.shader=new a.default(e),t.shader.setColor(t.color);break;case i.LINEAR:t.shader=new s.default(e);break;case i.IMAGE:t.shader=new u.default(e);break;case i.BACKGROUND_IMAGE:t.shader=new c.default(e),t.shader.setDimension(this._width,this._height)}this._fills.push(t)},t.prototype.renderFills=function(t){if(this._fills.length)for(var e=0;e<this._fills.length;e++){var r=this._fills[e];d.TypeChecker.checkState(null!=r.shader),r.shader.setViewportTransform(t),r.shader.draw()}},t.prototype.addStroke=function(t){var e=this._gl;switch(t.type){case o.SOLID:t.shader=new a.default(e),t.shader.setColor(t.color);break;case o.LINEAR:t.shader=new s.default(e);break;case o.BACKGROUND_IMAGE:t.shader=new c.default(e),t.shader.setDimension(this._width,this._height)}this._strokes.push(t)},t.prototype.renderStrokes=function(t){if(this._strokes.length&&this._strokeWidth)for(var e=0;e<this._strokes.length;e++){var r=this._strokes[e];d.TypeChecker.checkState(null!=r.shader),r.shader.setViewportTransform(t),r.shader.draw()}},t.prototype.getStrokeWidth=function(){return this._strokeWidth},t.prototype.setStrokeWidth=function(t){this._strokeWidth=t},t.prototype.getStrokePosition=function(){return this._strokePosition},t.prototype.setStrokePosition=function(t){this._strokePosition=t},t.prototype.updateStrokePath=function(){0!==this._strokeWidth&&0!==this._strokes.length&&(this._strokePath=(0,l.getStrokePath)(this._fillPath,this._strokeWidth,this._strokePosition),this._strokeArray=new Float32Array(this._strokePath),this._strokePathCount=this._strokePath.length/2)},t}();e.default=f},130:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundType=void 0;var a,s=i(r(9415)),u=i(r(8139)),c=i(r(6731)),l=i(r(9767)),h=i(r(9698)),d=i(r(6433)),f=r(4148);!function(t){t.SOLID="SOLID",t.LINEAR="LINEAR",t.IMAGE="IMAGE",t.BACKGROUND_IMAGE="BACKGROUND_IMAGE"}(a=e.BackgroundType||(e.BackgroundType={}));var p=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n._maskShader=new h.default(n._gl),n._clipContent=!0,n._backgrounds=[],n._backgroundPath=[],n._backgroundPathCount=0,n}return o(e,t),e.prototype.updateBackgroundPath=function(){var t=this._width,e=this._height;this._backgroundPath=[0,0,t,0,t,e,0,e],this._backgroundArray=new Float32Array(this._backgroundPath),this._backgroundPathCount=this._backgroundPath.length/2},e.prototype.setRotation=function(e){t.prototype.setRotation.call(this,e);for(var r=0;r<this._backgrounds.length;r++){var n=this._backgrounds[r];f.TypeChecker.checkExists(n.shader).setLocalTransform(this._absolute)}this._maskShader.setLocalTransform(this._absolute);for(var o=0,i=this._children;o<i.length;o++)i[o].updateLocalTransform()},e.prototype.prepareVertex=function(){if(this.updateBackgroundPath(),this._backgroundArray)for(var t=0;t<this._backgrounds.length;t++){var e=this._backgrounds[t];if(f.TypeChecker.checkState(null!=e.shader),e.shader.setPositionVertices(this._backgroundArray),e.shader.setPathCount(this._backgroundPathCount),e.shader.setPrimitiveType(this._gl.TRIANGLE_FAN),e.shader.setLocalTransform(this._absolute),"IMAGE"===e.type||"BACKGROUND_IMAGE"===e.type){var r=this._resourceLoader.getResource(e.resourceId);e.shader.setTexture(f.TypeChecker.checkExists(r).texture)}}for(var n=0,o=this._children;n<o.length;n++)o[n].prepareVertex();this._backgroundArray&&(this._maskShader.setPositionVertices(this._backgroundArray),this._maskShader.setPathCount(this._backgroundPathCount),this._maskShader.setPrimitiveType(this._gl.TRIANGLE_FAN),this._maskShader.setLocalTransform(this._absolute))},e.prototype.addBackground=function(t){var e=this._gl;switch(t.type){case a.SOLID:t.shader=new u.default(e),t.shader.setColor(t.color);break;case a.LINEAR:t.shader=new c.default(e);break;case a.IMAGE:t.shader=new l.default(e);break;case a.BACKGROUND_IMAGE:t.shader=new d.default(e),t.shader.setDimension(this._width,this._height)}this._backgrounds.push(t)},e.prototype.addChild=function(t){this._children.push(t),t.setParent(this)},e.prototype.clipContent=function(t){void 0===t&&(t=!0),this._clipContent=t},e.prototype.setOrientationMode=function(){},e.prototype.resizeToFit=function(){},e.prototype.renderBackgrounds=function(t){for(var e=0;e<this._backgrounds.length;e++){var r=this._backgrounds[e];f.TypeChecker.checkState(null!=r.shader),r.shader.setViewportTransform(t),r.shader.draw()}},e.prototype.render=function(t){this.renderBackgrounds(t);var e=this._gl;this._clipContent&&(e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,255),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),this._maskShader.setViewportTransform(t),this._maskShader.draw(),e.enable(e.STENCIL_TEST),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP));for(var r=0,n=this._children;r<n.length;r++)n[r].render(t);this._clipContent&&e.disable(e.STENCIL_TEST)},e.prototype.updateFillPath=function(){},e}(s.default);e.default=p},3207:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(9415)),s=r(9950),u=function(t){function e(e,r,n){void 0===n&&(n=3);var o=t.call(this,e,r)||this;return o._pointCount=n,o}return o(e,t),e.prototype.getPointCount=function(){return this._pointCount},e.prototype.setPointCount=function(t){this._pointCount=t},e.prototype.updateFillPath=function(){var t=this._pointCount,e=360/t,r=this._width,n=this._height;this._fillPath=[];for(var o=0+r/2,i=0+n/2,a=0;a<t;a++){var u=(0,s.degToRad)(e*a),c=o+Math.sin(u)*r/2,l=i-Math.cos(u)*n/2;this._fillPath.push(c,l)}this._fillArray=new Float32Array(this._fillPath),this._fillPathCount=this._fillPath.length/2},e}(a.default);e.default=u},7271:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.updateFillPath=function(){var t=this._width,e=this._height;this._fillPath=[0,0,t,0,t,e,0,e],this._fillArray=new Float32Array(this._fillPath),this._fillPathCount=this._fillPath.length/2},e}(i(r(9415)).default);e.default=a},4410:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.updateFillPath=function(){var t=this._width,e=this._height;this._fillPath=[t/2,0,t,e,0,e],this._fillArray=new Float32Array(this._fillPath),this._fillPathCount=this._fillPath.length/2},e}(i(r(9415)).default);e.default=a},3088:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getReferencePointWithRotationWithoutMatrix=e.getReferencePointWithRotation=e.getCenterPoint=e.getStrokePath=e.StrokePosition=void 0;var o,i=n(r(4773)),a=r(9950);function s(t,e,r){var n=(0,a.degToRad)(t),o=Math.cos(n),i=Math.sin(n);return[(o*e-i*r)/2,(i*e+o*r)/2]}(o=e.StrokePosition||(e.StrokePosition={}))[o.INNER=0]="INNER",o[o.CENTER=.5]="CENTER",o[o.OUTTER=1]="OUTTER",e.getStrokePath=function(t,e,r){for(var n=[],o=0;o<t.length;o+=2)n.push([t[o],t[o+1]]);var a=(0,i.default)(n,!0),s=[];for(o=0;o<a.length;o++){var u=n[o][0],c=n[o][1],l=a[o],h=l[0][0],d=l[0][1],f=l[1],p=h*e*f,_=d*e*f;s.push(u-p*r,c-_*r,u+p*(1-r),c+_*(1-r))}return s.push(s[0],s[1]),s.push(s[2],s[3]),s},e.getCenterPoint=s,e.getReferencePointWithRotation=function(t,e,r,n,o,i){var u=s(o,r,n),c=a.m4.translation(t+u[0],e+u[1],0);return c=a.m4.zRotate(c,(0,a.degToRad)(i-o)),{x:(c=a.m4.translate(c,-u[0],-u[1],0))[12],y:c[13]}},e.getReferencePointWithRotationWithoutMatrix=function(t,e,r,n,o,i){var u=s(o,r,n),c=(0,a.degToRad)(i),l=Math.sqrt(Math.pow(r,2)+Math.pow(n,2))/2,h=Math.atan2(r,n),d=c+1.5*Math.PI-h,f=l*Math.cos(d),p=l*Math.sin(d);return{x:t+f+u[0],y:e+p+u[1]}}},1483:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HUD=void 0;var o=n(r(3466)),i=function(){function t(){this._stats=new o.default}return t.prototype.init=function(){this._stats.showPanel(1),this._stats.dom.id="hudPanel",document.body.appendChild(this._stats.dom)},t.prototype.show=function(){this._stats.dom.style.display="block"},t.prototype.hide=function(){this._stats.dom.style.display="none"},t.prototype.statBegin=function(){this._stats.begin()},t.prototype.statEnd=function(){this._stats.end()},t}();e.HUD=i},5459:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(1483),s=i(r(7475)),u=r(4248),c=i(r(1348)),l=window;l._debug||(l._debug={}),window.addEventListener("load",(function(){var t;return n(this,void 0,void 0,(function(){var e,r,n,i,h,d,f,p,_,m,g,y,v,x;return o(this,(function(o){switch(o.label){case 0:if(e=document.getElementById("canvas"),!(r=(0,u.getSceneLoader)())){for(n=(0,u.getSceneList)(),e.style.display="none",i=document.createElement("ul"),h=0,d=n;h<d.length;h++)f=d[h],(p=document.createElement("a")).textContent=f,p.href="".concat(location.origin+location.pathname,"?sceneName=").concat(f),(_=document.createElement("li")).appendChild(p),i.appendChild(_);return document.body.appendChild(i),[2]}return m=new a.HUD,g=s.default.create(e,r,m),l._debug.renderer=g,l._debug.showGlInfo=function(){return console.log(g.getGlInfo())},[4,g.init()];case 1:return o.sent(),e.addEventListener("wheel",(function(t){t.preventDefault(),t.stopPropagation(),t.metaKey||t.altKey||t.ctrlKey?g.zoom(-t.deltaY,t.clientX,t.clientY):g.panTo(-t.deltaX,-t.deltaY)})),window.addEventListener("resize",(function(){g.maybeResizeCanvas()&&g.drawScene()})),(null===(t=null==r?void 0:r.config)||void 0===t?void 0:t.autoPlay)?(y=function(){g.drawScene(),requestAnimationFrame(y)})():g.drawScene(),new c.default(g).init(["angleX","angleZ","scaleZ"]),v=!0,x=document.getElementById("uiContainer"),window.addEventListener("keypress",(function(t){"h"===t.key&&((v=!v)?(m.show(),x&&(x.style.display="block")):(m.hide(),x&&(x.style.display="none")))})),[2]}}))}))}))},1028:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseElement=e.BatchRendering=void 0;var l=r(4148),h=c(r(561)),d=c(r(4092)),f=r(2920),p=i(r(2276)),_=r(6395),m=function(){function t(t,e,r,n){this._resourceLoader=t,this._gl=e,this._glExt=n,this.isVboDirty=!1;var o=this._gl,i=this._glExt;this.quadVa=l.TypeChecker.checkExists(i.createVertexArray()),i.bindVertexArray(this.quadVa);var a=r({gl:this._gl,resourceLoader:this._resourceLoader}),s=a.elements,u=a.animationStep;this.resourceLoading=this._resourceLoader.load();var c=this.appendElements(s),_=c.vertices,m=c.indices,g=c.textures;this.quadVb=l.TypeChecker.checkExists(o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,this.quadVb),this.vertices=_,o.bufferData(o.ARRAY_BUFFER,this.vertices,o.DYNAMIC_DRAW),this.quadIb=l.TypeChecker.checkExists(o.createBuffer()),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.quadIb),this.indices=m,o.bufferData(o.ELEMENT_ARRAY_BUFFER,this.indices,o.DYNAMIC_DRAW);var y=l.TypeChecker.checkExists(p.createProgramFromSources(this._gl,{VERTEX_SHADER:d.default,FRAGMENT_SHADER:h.default},[],[]));this.program=y,this.setupVertexAttributes([{name:"aVertexPosition",size:3},{name:"aVertexColor",size:4},{name:"aTextureIndex",size:1},{name:"aVertexTextureCoords",size:2}],y),this.uViewportTransform=(0,f.initUniformMatrix4fv)(this._gl,this.program,"uViewportTransform"),this.uTextures=(0,f.initUniformTextures)(this._gl,this.program,"uTextures"),this.uTextures.value=g,u&&this.resourceLoading.then((function(){var t=function(e){u(e),requestAnimationFrame(t)};requestAnimationFrame(t)}))}return t.prototype.appendElements=function(t){for(var e=this,r=[],n=0,o=0,i=[],a=new y,s=this._gl,u=function(t){r.push.apply(r,t.vertices);var u=o;t.bindVertexUpdater((function(t){e.updateVertices([{offset:u,value:t}])})),i.push.apply(i,t.indices.map((function(t){return t+n}))),n+=t.verticesNumber,o+=t.vertices.length;var l=t.textureResourceId;if(null==l)return"continue";var h=c._resourceLoader.getResource(l);if(null==h)return"continue";var d=a.has(l),f=a.put(l,h);c.resourceLoading.then((function(){if(t.update({textureIndex:f}),!d&&h instanceof _.VideoResource&&h.options.autoPlay){var e=function(){s.activeTexture(s.TEXTURE0+f),h.update(),requestAnimationFrame(e)};requestAnimationFrame(e)}}))},c=this,l=0,h=t;l<h.length;l++)u(h[l]);return{vertices:new Float32Array(r),indices:new Int32Array(i),textures:a.values().map((function(t){return t.texture}))}},t.prototype.init=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return console.log("batch rendering init"),[4,this.resourceLoading];case 1:return t.sent(),[2]}}))}))},t.prototype.updateVertices=function(t){for(var e=0,r=t;e<r.length;e++)for(var n=r[e],o=n.offset,i=n.value,a=0;a<i.length;a++)this.vertices[o+a]=i[a];this.isVboDirty=!0},t.prototype.render=function(t){var e=this._gl,r=this._glExt;e.useProgram(this.program),t&&(this.uViewportTransform.value=t),this.uViewportTransform.apply(),this.uTextures.apply(),r.bindVertexArray(this.quadVa),this.isVboDirty&&(e.bindBuffer(e.ARRAY_BUFFER,this.quadVb),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),this.isVboDirty=!1),e.drawElements(e.TRIANGLES,this.indices.length,e.UNSIGNED_INT,0),r.bindVertexArray(null)},t.prototype.setupVertexAttributes=function(t,e){for(var r=this._gl,n=0,o=t.reduce((function(t,e){return t+4*e.size}),0),i=0,a=t;i<a.length;i++){var s=a[i],u=s.name,c=s.size,l=r.getAttribLocation(e,u);r.enableVertexAttribArray(l),r.vertexAttribPointer(l,c,r.FLOAT,!1,o,n),n+=4*c}},t}();e.BatchRendering=m;var g=function(){function t(t){var e=t.dimension,r=t.type,n=t.colors,o=t.textureResourceId,i=t.textureIndex,a=t.textureCoords;this.dimension=e;var s=e.x,c=e.y,l=e.width,h=e.height;this.colors=n,this.textureResourceId=o;var d=null!=i?i:-1;this.textureIndex=d;var f=null!=a?a:[0,0];this.textureCoords=f,this._vertices=u(u(u(u(u(u(u(u([s,c,0],this.getColorVertices(n[0]),!0),[d,f[0],f[1],s+l,c,0],!1),this.getColorVertices(n[1]),!0),[d,f[2],f[3],s+l,c+h,0],!1),this.getColorVertices(n[2]),!0),[d,f[4],f[5],s,c+h,0],!1),this.getColorVertices(n[3]),!0),[d,f[6],f[7]],!1),this._verticesNumber=4,this._indices=[0,1,2,2,3,0],this.type=r}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this._vertices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesNumber",{get:function(){return this._verticesNumber},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indices",{get:function(){return this._indices},enumerable:!1,configurable:!0}),t.prototype.update=function(t){var e=t.dimension,r=t.colors,n=t.textureIndex,o=t.textureCoords;e&&(this.dimension=e),r&&(this.colors=r),null!=n&&(this.textureIndex=n),o&&(this.textureCoords=o);var i=this.dimension,a=i.x,s=i.y,c=i.width,l=i.height,h=this.textureIndex,d=this.textureCoords;this._vertices=u(u(u(u(u(u(u(u([a,s,0],this.getColorVertices(this.colors[0]),!0),[h,d[0],d[1],a+c,s,0],!1),this.getColorVertices(this.colors[1]),!0),[h,d[2],d[3],a+c,s+l,0],!1),this.getColorVertices(this.colors[2]),!0),[h,d[4],d[5],a,s+l,0],!1),this.getColorVertices(this.colors[3]),!0),[h,d[6],d[7]],!1),this._updateVerticesBuffer?this._updateVerticesBuffer(this._vertices):console.warn("Try to update an element without binding a vertex updater")},t.prototype.bindVertexUpdater=function(t){this._updateVerticesBuffer=t},t.prototype.getColorVertices=function(t){return[t.r,t.g,t.b,t.a]},t}();e.BaseElement=g;var y=function(){function t(){this.map=new Map,this.orderedValues=[]}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.put=function(t,e){var r=this.getIndex(t);if(null!=r)return r;var n=this.orderedValues.length;return this.map.set(t,n),this.orderedValues.push(e),n},t.prototype.values=function(){return this.orderedValues},t.prototype.getIndex=function(t){return this.map.get(t)},t}()},9563:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlExtensions=void 0;var n=r(4148);e.getGlExtensions=function(t){var e=n.TypeChecker.checkExists(t.getExtension("OES_vertex_array_object"));return n.TypeChecker.checkExists(t.getExtension("OES_element_index_uint")),{createVertexArray:function(){return e.createVertexArrayOES()},bindVertexArray:function(t){return e.bindVertexArrayOES(t)}}}},7475:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=u(r(8411)),l=r(6395),h=i(r(2276)),d=r(5141),f=r(9950),p=r(4148),_=r(1028),m=r(2672),g=r(4248),y=r(9563),v=function(){function t(t,e,r,n){void 0===n&&(n={enableGrid:!0,enableRetina:!0}),this._gl=t,this.rendering=e,this._hud=r,this.config=n,this._translation=[],this._rotation=[],this._scale=[];var o=this._gl;o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND)}return t.create=function(e,r,n){var o="webgl",i=p.TypeChecker.checkExists(e.getContext(o,{preserveDrawingBuffer:d.USE_PRESERVE_DRAWING_BUFFER,stencil:!0}),"Failed to initialize canvas context: ".concat(o)),a=(0,y.getGlExtensions)(i),s=new l.ResourceLoader(i);switch(r.scene){case"gradientBox":case"quad2m":case"textureFiltering":return new t(i,new _.BatchRendering(s,i,r.loader,a),n);case g.SceneName.multiShaders:case g.SceneName.rotation:case g.SceneName.shape10kDemo:case g.SceneName.simpleAniDemo:case g.SceneName.strokeDemo:var u=r.loader({gl:i,resourceLoader:s}),c=new t(i,new m.MultiDrawRendering(i,a,s,u.dataArray),n);if(u.animationStep){var h=u.animationStep,f=function(t){h(t),c.drawScene(),!0!==window._anistop&&window.requestAnimationFrame(f)};setTimeout((function(){window.requestAnimationFrame(f)}),2e3)}return c;default:throw new Error("No suitable rendering method")}},t.prototype.maybeResizeCanvas=function(){var t=this._gl,e=h.resizeCanvasToDisplaySize(t.canvas,this.config.enableRetina?window.devicePixelRatio:1);return e&&t.viewport(0,0,t.canvas.width,t.canvas.height),e},t.prototype.initViewport=function(){var t=this._gl;this.maybeResizeCanvas(),console.log(t.canvas.width),console.log(t.canvas.height),this._translation=[t.canvas.width/2/window.devicePixelRatio,t.canvas.height/2/window.devicePixelRatio,0],this._rotation=[(0,f.degToRad)(0),(0,f.degToRad)(0),(0,f.degToRad)(0)],this._scale=[1,1,1],this.clear()},t.prototype.clear=function(){var t=this._gl;t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},t.prototype.init=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this._hud.init(),this.config.enableGrid&&(this._gridShader=new c.default(this._gl)),this.initViewport(),[4,this.rendering.init()];case 1:return t.sent(),[2]}}))}))},t.prototype.getTranslation=function(){return this._translation},t.prototype.getRotation=function(){return this._rotation},t.prototype.getScale=function(){return this._scale},t.prototype.drawScene=function(){this._hud.statBegin();var t=this._gl,e=f.m4.orthographic(0,t.canvas.clientWidth,t.canvas.clientHeight,0,600,-600),r=this.getTranslation();if(e=f.m4.translate(e,r[0],r[1],r[2]),d.ENABLE_VIEWPORT_ROTATION){var n=this.getRotation();e=f.m4.xRotate(e,n[0]),e=f.m4.yRotate(e,n[1]),e=f.m4.zRotate(e,n[2])}var o=this.getScale();e=f.m4.scale(e,o[0],o[1],o[2]),this.clear(),this.rendering.render(e,o),o[0]>4&&this._gridShader&&(this._gridShader.setGridDimension({zoomScale:o[0],offsetX:r[0],offsetY:r[1],canvasClientHeight:t.canvas.clientHeight,pitch:o[0]>10?1:10}),this._gridShader.draw()),this._hud.statEnd()},t.prototype.panTo=function(t,e){var r=this.getTranslation();r[0]+=t,r[1]+=e,this.drawScene()},t.prototype.updateVertices=function(t,e){this.rendering.updateVertices(t),e&&this.drawScene()},t.prototype.zoom=function(t,e,r){var n=this.getScale(),o=t>0?d.ZOOM_IN_RATIO:d.ZOOM_OUT_RATIO,i=n[0]*(1+o);if(!(i>d.MAX_ZOOM_SCALE||i<d.MIN_ZOOM_SCALE)){var a=this.getTranslation(),s=(e-a[0])*o,u=(r-a[1])*o;a[0]-=s,a[1]-=u,n[0]=i,n[1]=i,this.drawScene()}},t.prototype.getGlInfo=function(){var t=this._gl;if(t instanceof WebGL2RenderingContext)return{MAX_ELEMENT_INDEX:t.getParameter(t.MAX_ELEMENT_INDEX),MAX_ELEMENTS_VERTICES:t.getParameter(t.MAX_ELEMENTS_VERTICES),MAX_ELEMENTS_INDICES:t.getParameter(t.MAX_ELEMENTS_INDICES),MAX_TEXTURE_IMAGE_UNITS:t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)};if(t instanceof WebGLRenderingContext)return{MAX_TEXTURE_IMAGE_UNITS:t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)};throw new Error("Invalid WebGL Rendering Context")},t}();e.default=v},2672:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MultiDrawRendering=void 0;var a=r(9415),s=i(r(7271)),u=function(){function t(t,e,r,n){this._gl=t,this._glExt=e,this._resourceLoader=r,this._dataArray=n,this._vao=this._glExt.createVertexArray(),this._glExt.bindVertexArray(this._vao),console.log(performance.now(),"preparing vertices...");for(var o=0,i=this._dataArray;o<i.length;o++)i[o].prepareVertex();console.log(performance.now(),"DesignTable loaded.")}return t.prototype.init=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return console.log(performance.now(),"loading images..."),[4,this._resourceLoader.load()];case 1:return t.sent(),[2]}}))}))},t.prototype.updateVertices=function(t){throw new Error("MultiDrawRendering does not support updateVertices")},t.prototype.render=function(t,e){if(void 0===e&&(e=[]),null!=t){for(var r=0;r<this._dataArray.length;r++)this._dataArray[r].render(t);this._selection&&(this._selection.setStrokeWidth(2/e[0]),this._selection.prepareVertex(),this._selection.render(t))}},t.prototype.getElement=function(t,e){void 0===e&&(e=this._dataArray);for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o._id===t)return o;if(o._children&&o._children.length>0)return this.getElement(t,o._children)}},t.prototype.select=function(t){var e=this.getElement(t);if(e){var r=new s.default(this._gl,this._resourceLoader);r.setDimension({x:e._absolute[12],y:e._absolute[13],width:e._width,height:e._height,rotation:e._rotation}),r.addStroke({type:a.StrokeType.SOLID,color:[1,.5,.5,1]}),r.setStrokePosition(.5),this._selection=r}else this._selection=void 0},t}();e.MultiDrawRendering=u},6395:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceLoader=e.VideoResource=e.ImageResource=e.Resource=void 0;var u=r(4148),c=r(5141),l=r(9950),h=function(){function t(t){var e=t.options,r=t.gl,n=t.url,o=t.media;this.options=e,this._gl=r,this._url=n,this.media=o,this.texture=u.TypeChecker.checkExists(this._gl.createTexture(),"Unable to create a WebGL texture")}return t.prototype.load=function(){return a(this,void 0,void 0,(function(){var t=this;return s(this,(function(e){return this.loadingPromise||(this.loadingPromise=new Promise((function(e){return a(t,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return[4,this.loadMedia()];case 1:return t=r.sent(),this.setupTexture(),this.updateTexture(t),e(),[2]}}))}))}))),[2,this.loadingPromise]}))}))},t.prototype.updateTexture=function(t){var e,r=null!==(e=this.options.textureFormat)&&void 0!==e?e:this._gl.RGBA;this._gl.texImage2D(this._gl.TEXTURE_2D,0,r,r,this._gl.UNSIGNED_BYTE,t)},t.prototype.update=function(){this.updateTexture(this.media)},t.prototype.setupTexture=function(){var t=this._gl;t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.options.pixelPerfect?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST)},t}();e.Resource=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.loadMedia=function(){var t=this,e=this.media;return new Promise((function(r){e.addEventListener("load",(function(){r(e)})),e.src=t._url}))},e}(h);e.ImageResource=d;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.loadMedia=function(){var t=this,e=this.media;return new Promise((function(r){e.src=t._url,e.muted=!0,e.loop=!0,e.addEventListener("playing",(function(){r(e)})),e.play()}))},e}(h);e.VideoResource=f;var p=function(){function t(t){this._gl=t,this._resources=new Map}return t.prototype.pushResourceSrc=function(t,e,r){void 0===e&&(e="image");var n=(0,l.uuidv4)(),o={url:t,gl:this._gl,options:i({autoPlay:!1,pixelPerfect:c.PIXEL_PERFECT,textureFormat:this._gl.RGBA},r)};switch(e){case"image":this._resources.set(n,new d(i(i({},o),{media:new Image})));break;case"video":this._resources.set(n,new f(i(i({},o),{media:document.createElement("video")})));break;default:throw new Error("Unknown type: ".concat(e))}return n},t.prototype.load=function(){return a(this,void 0,void 0,(function(){var t,e=this;return s(this,(function(r){switch(r.label){case 0:return t=Array.from(this._resources.keys()).map((function(t){var r=e.getResource(t);if(null==r)throw new Error("No resource for ".concat(t," is available"));return r.load()})),[4,Promise.all(t)];case 1:return r.sent(),[2]}}))}))},t.prototype.getResource=function(t){return this._resources.get(t)},t}();e.ResourceLoader=p},3221:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var n=r(463),o=r(1028),i=r(6395);function a(t,e){if(t[1]<t[0])throw new Error("range[1] must be greater than range[0]");var r=t[0],n=1;return function(){var o=r;return(r+=e*n)>t[1]?(n=-1,r=t[1]):r<t[0]&&(n=1,r=t[0]),o}}e.Config={autoPlay:!0},e.default=function(t){var r=t.resourceLoader,s={megamans:r.pushResourceSrc("/assets/megamans.png"),oranges:r.pushResourceSrc("/assets/oranges.png"),sword:r.pushResourceSrc(n.SWORD_ICON),earth:r.pushResourceSrc("/assets/file_example_MP4_1280_10MG.mp4","video",{autoPlay:!0}),stickyNotes:r.pushResourceSrc("/assets/file_example_MP4_4096x2160_29MG.mp4","video",{autoPlay:!0}),popcron:r.pushResourceSrc("/assets/popcorntest_MP4_300x180_2M.mp4","video",{autoPlay:!0})},u={videoStickyNotes:new o.BaseElement({dimension:{x:-2048,y:-1080,width:4096,height:2160,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:s.stickyNotes,textureCoords:[0,0,1,0,1,1,0,1]}),backgroundForEarthWithWrite1pxBorder:new o.BaseElement({dimension:{x:-1282,y:0,width:1282,height:722,rotation:0},type:0,colors:[{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1}],textureCoords:[0,0,1,0,1,1,0,1]}),videoEarthWithWrite1pxBorder:new o.BaseElement({dimension:{x:-1281,y:1,width:1280,height:720,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:s.earth,textureCoords:[0,0,1,0,1,1,0,1]}),imageSword:new o.BaseElement({dimension:{x:-98,y:-98,width:96,height:96,rotation:0},type:0,colors:[{r:.2,g:.5,b:.9,a:1},{r:.2,g:.5,b:.9,a:1},{r:.2,g:.5,b:.9,a:1},{r:.2,g:.5,b:.9,a:1}],textureResourceId:s.sword,textureCoords:[0,0,1,0,1,1,0,1]}),gradientColorBackgroundForMegaman:new o.BaseElement({dimension:{x:0,y:154,width:128,height:146,rotation:0},type:0,colors:[{r:1,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:1,a:1},{r:1,g:1,b:0,a:1}]}),megaman:new o.BaseElement({dimension:{x:1,y:155,width:126,height:144,rotation:0},type:0,colors:[{r:.9,g:.5,b:.1,a:1},{r:.9,g:.5,b:.1,a:1},{r:.9,g:.5,b:.1,a:1},{r:.9,g:.5,b:.1,a:1}],textureResourceId:s.megamans,textureCoords:[48/1170,57/153,111/1170,57/153,111/1170,129/153,48/1170,129/153]}),oranges:new o.BaseElement({dimension:{x:0,y:-155,width:300,height:155,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:s.oranges,textureCoords:[0,0,1,0,1,1,0,1]}),gradientColorBackgroundForAllMegamans:new o.BaseElement({dimension:{x:0,y:0,width:1170,height:153,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:.5},{r:0,g:1,b:0,a:.5},{r:0,g:0,b:1,a:1},{r:.8,g:.8,b:.8,a:1}]}),selectionBoxForFirstMegaman:new o.BaseElement({dimension:{x:48,y:57,width:63,height:72,rotation:0},type:0,colors:[{r:.6,g:.6,b:.6,a:.5},{r:.6,g:.6,b:.6,a:.5},{r:.6,g:.6,b:.6,a:.5},{r:.6,g:.6,b:.6,a:.5}]}),allMegamans:new o.BaseElement({dimension:{x:0,y:0,width:1170,height:153,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:s.megamans,textureCoords:[0,0,1,0,1,1,0,1]}),popcron:new o.BaseElement({dimension:{x:-320,y:20,width:300,height:180,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:s.popcron,textureCoords:[0,0,1,0,1,1,0,1]})},c=!!e.Config.autoPlay,l=document.createElement("button"),h=[s.earth,s.popcron,s.stickyNotes].map((function(t){return r.getResource(t)})).filter((function(t){return t instanceof i.VideoResource}));l.style.position="fixed",l.style.bottom="20px",l.style.right="20px",l.style.width="100px",l.textContent=c?"Pause":"Play",l.addEventListener("click",(function(){c=!c,l.textContent=c?"Pause":"Play",c?h.map((function(t){return t.media.play()})):h.map((function(t){return t.media.pause()}))})),document.body.appendChild(l);var d=a([0,1],.005),f=a([0,1170],1);return{elements:[u.videoStickyNotes,u.backgroundForEarthWithWrite1pxBorder,u.videoEarthWithWrite1pxBorder,u.imageSword,u.gradientColorBackgroundForMegaman,u.megaman,u.oranges,u.gradientColorBackgroundForAllMegamans,u.selectionBoxForFirstMegaman,u.allMegamans,u.popcron],animationStep:function(){if(c){var t=d();u.gradientColorBackgroundForAllMegamans.update({dimension:{x:0,y:0,width:f(),height:153,rotation:0}}),u.gradientColorBackgroundForMegaman.update({colors:[{r:t,g:1,b:0,a:1},{r:0,g:0,b:1-t,a:1},{r:0,g:0,b:1-t,a:1},{r:t,g:1,b:0,a:1}]})}}}}},4248:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSceneLoader=e.getSceneList=e.SceneName=void 0;var s,u=a(r(9850)),c=a(r(6346)),l=a(r(7414)),h=a(r(5286)),d=a(r(6734)),f=i(r(3221)),p=i(r(2333)),_=i(r(8359));!function(t){t.shape10kDemo="shape10kDemo",t.simpleAniDemo="simpleAniDemo",t.strokeDemo="strokeDemo",t.multiShaders="multiShaders",t.rotation="rotation"}(s=e.SceneName||(e.SceneName={})),e.getSceneList=function(){return[s.shape10kDemo,s.simpleAniDemo,s.strokeDemo,s.multiShaders,s.rotation,"gradientBox","quad2m","textureFiltering"]},e.getSceneLoader=function(){var t=window.location.href,e=new URL(t).searchParams.get("sceneName");switch(e){case s.shape10kDemo:return{scene:e,loader:u.default};case s.simpleAniDemo:return{scene:e,loader:c.default};case s.strokeDemo:return{scene:e,loader:l.default};case s.multiShaders:return{scene:e,loader:h.default};case s.rotation:return{scene:e,loader:d.default};case"gradientBox":return{scene:e,loader:f.default,config:f.Config};case"quad2m":return{scene:e,loader:p.default,config:p.Config};case"textureFiltering":return{scene:e,loader:_.default,config:_.Config};default:return}}},5286:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(463),i=n(r(7271)),a=n(r(3207)),s=r(9415);e.default=function(t){var e=t.gl,r=t.resourceLoader,n=[];(u=new i.default(e,r)).setDimension({x:-100,y:-200,width:96,height:96,rotation:0});var u,c=r.pushResourceSrc(o.SWORD_ICON);return u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.7,.3,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),(u=new i.default(e,r)).setDimension({x:-100,y:-70,width:96,height:96,rotation:0}),c=r.pushResourceSrc(o.SWORD_ICON),u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addFill({type:s.FillType.SOLID,color:[.8,.3,.3,.5]}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.7,.3,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),(u=new i.default(e,r)).setDimension({x:30,y:-200,width:250,height:250,rotation:0}),c=r.pushResourceSrc(o.SWORD_ICON),u.addFill({type:s.FillType.SOLID,color:[.3,.3,.6,.5]}),u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.7,.3,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),(u=new a.default(e,r)).setDimension({x:310,y:-200,width:250,height:250,rotation:0}),u.setPointCount(5),c=r.pushResourceSrc(o.SWORD_ICON),u.addFill({type:s.FillType.SOLID,color:[.3,.3,.6,.5]}),u.addFill({type:s.FillType.BACKGROUND_IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.7,.3,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),(u=new a.default(e,r)).setDimension({x:610,y:-200,width:250,height:250,rotation:0}),u.setPointCount(5),c=r.pushResourceSrc(o.SWORD_ICON),u.addFill({type:s.FillType.SOLID,color:[.3,.3,.6,.5]}),u.addStroke({type:s.StrokeType.BACKGROUND_IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.8,.1,.3,.3]}),u.setStrokePosition(0),u.setStrokeWidth(50),n.push(u),(u=new i.default(e,r)).setDimension({x:860,y:-200,width:63,height:72,rotation:0}),c=r.pushResourceSrc("/assets/megaman.png"),u.addFill({type:s.FillType.SOLID,color:[.6,.3,.9,1]}),u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[0,.7,.5,.7]}),u.setStrokePosition(.5),u.setStrokeWidth(2),u.prepareVertex(),n.push(u),(u=new i.default(e,r)).setDimension({x:-100,y:100,width:1170,height:153,rotation:0}),c=r.pushResourceSrc("/assets/megamans.png"),u.addFill({type:s.FillType.SOLID,color:[.6,.3,.6,.5]}),u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.3,.7,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),(u=new i.default(e,r)).setDimension({x:-100,y:300,width:300,height:155,rotation:0}),c=r.pushResourceSrc("/assets/oranges.png"),u.addFill({type:s.FillType.SOLID,color:[.6,.3,.6,.5]}),u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.3,.7,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),(u=new i.default(e,r)).setDimension({x:-100,y:500,width:6858,height:4574,rotation:0}),c=r.pushResourceSrc("/assets/strawberries.jpg"),u.addFill({type:s.FillType.SOLID,color:[.6,.3,.6,.5]}),u.addFill({type:s.FillType.IMAGE,resourceId:c}),u.addStroke({type:s.StrokeType.SOLID,color:[.3,.3,.7,1]}),u.setStrokePosition(1),u.setStrokeWidth(10),n.push(u),{dataArray:n}}},2333:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var n=r(463),o=r(1028),i=r(9950);e.Config={autoPlay:!0},e.default=function(t){for(var e=t.resourceLoader,r=[],a=[e.pushResourceSrc("/assets/megamans.png"),e.pushResourceSrc("/assets/oranges.png"),e.pushResourceSrc(n.SWORD_ICON),e.pushResourceSrc("/assets/file_example_MP4_1280_10MG.mp4","video",{autoPlay:!0}),e.pushResourceSrc("/assets/file_example_MP4_4096x2160_29MG.mp4","video",{autoPlay:!0}),e.pushResourceSrc("/assets/popcorntest_MP4_300x180_2M.mp4","video",{autoPlay:!0})],s=0;s<1024;s++)for(var u=0;u<1024;u++){var c=100*s+(0,i.randomInt)(30),l=100*u+(0,i.randomInt)(30),h=10+(0,i.randomInt)(200),d=10+(0,i.randomInt)(50),f=Math.random(),p=Math.random(),_=Math.random();r.push(new o.BaseElement({dimension:{x:c,y:l,width:h,height:d,rotation:0},type:0,colors:[{r:f,g:p,b:_,a:1},{r:f,g:p,b:_,a:1},{r:f,g:p,b:_,a:1},{r:f,g:p,b:_,a:1}],textureResourceId:a[Math.floor(9*Math.random())-3],textureCoords:[0,0,1,0,1,1,0,1]}))}return{elements:r}}},6734:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(r(7271)),u=a(r(3207)),c=i(r(130)),l=r(9415);e.default=function(t){var e=t.gl,r=t.resourceLoader,n=[],o=new c.default(e,r);o.setDimension({x:10,y:0,width:100,height:200,rotation:0}),o.clipContent(!0),o.addBackground({type:c.BackgroundType.SOLID,color:[.8,.8,.8,1]}),n.push(o),(i=new s.default(e,r)).setDimension({x:0,y:0,width:60,height:60,rotation:45});var i,a=r.pushResourceSrc("/assets/megaman.png");return i.addFill({type:l.FillType.IMAGE,resourceId:a}),i.addStroke({type:l.StrokeType.SOLID,color:[.3,.8,0,1]}),i.setStrokePosition(1),i.setStrokeWidth(20),o.addChild(i),(i=new s.default(e,r)).setDimension({x:60,y:60,width:60,height:60,rotation:45}),i.addFill({type:l.FillType.SOLID,color:[.8,.3,.8,1]}),o.addChild(i),(i=new u.default(e,r)).setDimension({x:0,y:100,width:60,height:30,rotation:0}),i.setPointCount(4),i.addFill({type:l.FillType.SOLID,color:[.3,.8,.8,1]}),i.addStroke({type:l.StrokeType.SOLID,color:[.3,.5,0,1]}),i.setStrokePosition(1),i.setStrokeWidth(10),o.addChild(i),(i=new u.default(e,r)).setDimension({x:0,y:0,width:10,height:10,rotation:0}),i.setPointCount(40),i.addFill({type:l.FillType.SOLID,color:[.9,.1,.4,1]}),n.push(i),{dataArray:n}}},9850:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(7271)),i=n(r(4410)),a=n(r(3207)),s=r(9950),u=r(9415);e.default=function(t){for(var e=t.gl,r=t.resourceLoader,n=[o.default,i.default,a.default],c=[],l=0;l<100;l++)for(var h=0;h<100;h++){var d=new(0,n[(0,s.randomInt)(n.length)])(e,r);d.setDimension({x:100*l+(0,s.randomInt)(30),y:100*h+(0,s.randomInt)(30),width:10+(0,s.randomInt)(50),height:10+(0,s.randomInt)(50),rotation:(0,s.randomInt)(359)}),d instanceof a.default&&d.setPointCount(3+(0,s.randomInt)(20)),d.addFill({type:u.FillType.SOLID,color:[Math.random(),Math.random(),Math.random(),1]}),d.addStroke({type:u.StrokeType.SOLID,color:[1,1,1,1]}),d.setStrokePosition(1),d.setStrokeWidth((0,s.randomInt)(15)),c.push(d)}return{dataArray:c}}},6346:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(463),i=r(6086),a=n(r(7271)),s=n(r(4410)),u=n(r(3207)),c=r(9950),l=r(9415);e.default=function(t){var e,r=t.gl,n=t.resourceLoader,h=[a.default,s.default,u.default],d=[],f=n.pushResourceSrc(o.SWORD_ICON),p=new a.default(r,n);p.zIndex=-1,p.setDimension({x:0,y:0,width:200,height:400,rotation:0}),p.addFill({type:l.FillType.SOLID,color:[1,1,1,.2]});for(var _=0;_<3;_++)for(var m=0;m<3;m++){var g=new(0,h[m])(r,n);g.zIndex=2-Math.max(_,m),g.setDimension({x:100*_+(0,c.randomInt)(30),y:100*m+(0,c.randomInt)(30),width:60+(0,c.randomInt)(20),height:60+(0,c.randomInt)(20),rotation:(0,c.randomInt)(359)}),g instanceof u.default&&g.setPointCount(3+(0,c.randomInt)(20)),g.addFill({type:l.FillType.SOLID,color:[Math.random(),Math.random(),Math.random(),1]}),g.addStroke({type:l.StrokeType.SOLID,color:[1,1,1,.5]}),g.setStrokePosition(1),g.setStrokeWidth(10+(0,c.randomInt)(15)),d.push(g)}return d[2].addStroke({type:l.StrokeType.BACKGROUND_IMAGE,resourceId:f}),d[5].addFill({type:l.FillType.BACKGROUND_IMAGE,resourceId:f}),d[6].addFill({type:l.FillType.BACKGROUND_IMAGE,resourceId:f}),d[7].addStroke({type:l.StrokeType.BACKGROUND_IMAGE,resourceId:f}),d.push(p),{dataArray:d,animationStep:function(t){e||(e=t);var r=t-e;[0,2,4,6,8].forEach((function(t){var e=d[t];e.setRotation((e.getRotation()+1)%360)})),[7].forEach((function(t){var e=d[t],r=(0,i.clamp)(e.getStrokeWidth()+.1,0,30);e.setStrokeWidth(30===r?0:r),e.prepareVertex()})),[3].forEach((function(t){var e=d[t],r=(0,i.clamp)(e.getWidth()+.1,0,30),n=(0,i.clamp)(e.getHeight()+.2,0,60);e.setDimension({width:30===r?0:r,height:60===n?0:n,x:0,y:0,rotation:0}),e.prepareVertex()})),[5].forEach((function(t){var e=d[t],n=Math.floor(r/200)%14;e instanceof u.default&&n!==e.getPointCount()&&(e.setPointCount(3+n),e.prepareVertex())})),[1,6].forEach((function(t){var e=d[t],n=[0,.5,1][Math.floor(r/1e3)%3];n!==e.getStrokePosition()&&(e.setStrokePosition(n),e.prepareVertex())}))}}}},7414:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(7271)),i=n(r(4410)),a=n(r(3207)),s=r(9415);e.default=function(t){var e,r=t.gl,n=t.resourceLoader,u=[],c=0;return(e=new o.default(r,n)).zIndex=c++,e.setDimension({x:-100,y:-200,width:200,height:400,rotation:0}),e.addFill({type:s.FillType.SOLID,color:[.3,.3,.3,1]}),e.addStroke({type:s.StrokeType.SOLID,color:[.3,.7,.3,1]}),e.setStrokePosition(1),e.setStrokeWidth(10),u.push(e),(e=new i.default(r,n)).zIndex=c++,e.setDimension({x:-100,y:-200,width:200,height:400,rotation:0}),e.addFill({type:s.FillType.SOLID,color:[.9,.3,.3,1]}),e.addStroke({type:s.StrokeType.SOLID,color:[0,.3,1,1]}),e.setStrokePosition(0),e.setStrokeWidth(20),u.push(e),(e=new a.default(r,n)).zIndex=c++,e.setDimension({x:-100,y:-50,width:200,height:100,rotation:0}),e.setPointCount(4),e.addFill({type:s.FillType.SOLID,color:[Math.random(),Math.random(),Math.random(),.5]}),u.push(e),(e=new a.default(r,n)).zIndex=c++,e.setDimension({x:-100,y:-200,width:200,height:100,rotation:0}),e.setPointCount(4),e.addFill({type:s.FillType.SOLID,color:[Math.random(),Math.random(),Math.random(),.9]}),e.addStroke({type:s.StrokeType.SOLID,color:[1,1,1,.3]}),e.setStrokePosition(.5),e.setStrokeWidth(20),u.push(e),(e=new a.default(r,n)).zIndex=c++,e.setDimension({x:-100,y:100,width:200,height:100,rotation:0}),e.setPointCount(4),e.addFill({type:s.FillType.SOLID,color:[Math.random(),Math.random(),Math.random(),.5]}),e.addStroke({type:s.StrokeType.SOLID,color:[1,1,1,.3]}),e.setStrokePosition(1),e.setStrokeWidth(10),u.push(e),{dataArray:u}}},463:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SWORD_ICON=void 0,e.SWORD_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQsSURBVHhe7dGxreNmEIXRV8224NSZnSzcxRblAtzCJi7CgRtwJW/njpnp6CdMSLAozgVONiCpTx+z2Ww2m81ms9lsNtv259+fDzE7OMU8YnZwinnE7OAU84jZwSnmEbODU8wjZjtTtPL1r39It0uznSlaUfzQ7dJsZ4pWFD90uzTbmaIVxQ/dLs12pmhF8UO3S7OdKVpR/NDt0myb4hRFDt2GbkO3bbZNcYpihm5Dt6HbNtumOEUxQ7eh29Btm21TnKKYodvQbei2zbYpTlHM0G3oNnTbZtsUpyhm6DZ0G7ptl5siFEUL3YZuQ7dttk1ximKGbkO3ods226Y4RTFDt6Hb0G2bbVOcopih29Bt6LbNtilOUczQbeg2dNtm2xSnKGboNnQbum3/277+/PmfPGqKUBQtdBu6Dd22l5sirzxqilMUM3Qbug3dtpebIq88aopTFDN0G7oN3baXmyKvPGqKUxQzdBu6Dd22l5sirzxqilMUM3Qbug3dtpebIq88aopTFDN0G7oN3baXmyKXL3/8Trpt96YIRdFCt6Hb0G07zRSzKH7ott2b4hTFDN2GbkO37TRTzKL4odt2b4pTFDN0G7oN3bbTTDGL4odu270pTlHM0G3oNnTbTjPFLIofum33pjhFMUO3odvQbTvNFLMofui23ZviFMUM3YZuQ7ft9FPkoj8ldBuKFoxWdBu6bW87xAzFD92GYgZjFt2GbtvbDjFD8UO3oZjBmEW3odv2tkPMUPzQbShmMGbRbei2ve0QMxQ/dBuKGYxZdBu6bW87xAzFD92GYgZjFt2GbtvbDjFD8UO3TdGKIodu2+WmmEXxQ7dNMYvih27b5aaYRfFDt00xi+KHbtvlpphF8UO3TTGL4odu2+WmmEXxQ7dNMYvih27b5aaYRfFDt00xi+KHbttsmyIX/Smh26XZzhStKH7odmm2M0Urih+6XZrtTNGK4odul2Y7U7Si+KHbpdnOFK0ofuh2afbvfvrlt0/5/u1XYsyiP2VFz2hXm+KH4gejFUVe0TPa1ab4ofjBaEWRV/SMdrUpfih+MFpR5BU9o11tih+KH4xWFHlFz2hXm+KH4gejFUVe0TPa6acftaDIoT8ltrfcDs9e0Z8Sum2nmT5+QfFD8WN7y+3w7BXFD92200wfv6D4ofixveV2ePaK4odu22mmj19Q/FD82N5yOzx7RfFDt+0008cvKH4ofmxvuR2evaL4odt2munjFxQ/FD+2t9wOz15R/NBtO8308UU/NnTbnj29c+U008cXxQ/dtmdP71w5zfTxRfFDt+3Z0ztXTjN9fFH80G179vTOldNMH18UP3Tbnj29c+U008cXxQ/dtmdP71w5zfTxR8wOTjGPmB2cYh4xOzjFPGJ2cIp5xOzgFPOI2Ww2m81ms9lsNpvNZpfdx8cPzlpF85CxV1EAAAAASUVORK5CYII="},8359:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var n=r(1028);e.Config={autoPlay:!0},e.default=function(t){var e,r,a=t.gl,s=t.resourceLoader,u={fourColor:s.pushResourceSrc(i,"image",{pixelPerfect:!1}),kittenImagePixelated:s.pushResourceSrc(o,"image",{pixelPerfect:!0}),kittenImage:s.pushResourceSrc(o,"image",{pixelPerfect:!1,textureFormat:null!==(r=null===(e=a.getExtension("EXT_sRGB"))||void 0===e?void 0:e.SRGB_ALPHA_EXT)&&void 0!==r?r:a.RGBA})},c={fourColorBlue:new n.BaseElement({dimension:{x:-620,y:-410,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:u.fourColor,textureCoords:[0,0,.5,0,.5,.5,0,.5]}),fourColorPink:new n.BaseElement({dimension:{x:220,y:-410,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:u.fourColor,textureCoords:[.5,0,1,0,1,.5,.5,.5]}),fourColorRed:new n.BaseElement({dimension:{x:-620,y:10,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:u.fourColor,textureCoords:[0,.5,.5,.5,.5,1,0,1]}),fourColorGreen:new n.BaseElement({dimension:{x:220,y:10,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:0,b:0,a:1},{r:0,g:1,b:0,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:0,a:1}],textureResourceId:u.fourColor,textureCoords:[.5,.5,1,.5,1,1,.5,1]}),whiteBackgroundKittenPixelated:new n.BaseElement({dimension:{x:-200,y:-410,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:1,b:1,a:.5},{r:1,g:1,b:1,a:.5},{r:1,g:0,b:1,a:1},{r:1,g:0,b:1,a:1}]}),kittenPixelated:new n.BaseElement({dimension:{x:-200,y:-410,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1}],textureResourceId:u.kittenImagePixelated,textureCoords:[0,0,1,0,1,1,0,1]}),whiteBackground:new n.BaseElement({dimension:{x:-200,y:10,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:1,b:1,a:.5},{r:1,g:1,b:1,a:.5},{r:1,g:0,b:1,a:1},{r:1,g:0,b:1,a:1}]}),kitten:new n.BaseElement({dimension:{x:-200,y:10,width:400,height:400,rotation:0},type:0,colors:[{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1}],textureResourceId:u.kittenImage,textureCoords:[0,0,1,0,1,1,0,1]}),halfWhiteBackground:new n.BaseElement({dimension:{x:0,y:-420,width:210,height:840,rotation:0},type:0,colors:[{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1},{r:1,g:1,b:1,a:1}]}),halfBlueBackground:new n.BaseElement({dimension:{x:-210,y:-420,width:210,height:840,rotation:0},type:0,colors:[{r:0,g:0,b:1,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:1,a:1},{r:0,g:0,b:1,a:1}]})},l=!1,h=document.createElement("button");return h.style.position="fixed",h.style.bottom="20px",h.style.right="20px",h.style.width="200px",h.style.height="40px",h.textContent=l?"Switch to gl.SRC_ALPHA":"Switch to gl.ONE",h.addEventListener("click",(function(){l=!l,h.textContent=l?"Switch to gl.SRC_ALPHA":"Switch to gl.ONE"})),document.body.appendChild(h),{elements:[c.halfBlueBackground,c.halfWhiteBackground,c.whiteBackgroundKittenPixelated,c.kittenPixelated,c.whiteBackground,c.kitten,c.fourColorBlue,c.fourColorPink,c.fourColorRed,c.fourColorGreen],animationStep:function(){l?a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA):a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA)}}};var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAACU1JREFUeF7tXUlvHEUU/sb2eIlt7HhPIiIhEbjkkPwAJIQQJ8QpN6SIf5ALV+6RuPADkIhAHLjCAcSBG5wjEYEEF8SSOHbG8b6MZzzozaTs6upaXlV3z3RPqiVfPNX1Xn1fvbV6emqIV6kQqHG0OX10t9MBQIM7rTZqY6Pd2+o3v2Tdz5ExTGMIL3k9AjMOXk5A1ckTgtBBDbVIDAAbTjJmLlKchDQf3e24BgnrcQkbJisQa+ESIca7MLJi7Sus85JZjC8+HFKMhKSEtVrA9nNgpAZMTQNTU84N79oNzglKOqAXU3vuWntRxD06BA4PgdFRYP4yULsYa8OFT8jzrZ4QcY1PAHNzQH3cCtswkcKyiKMjYHcbaLcvcHllDpiZTeBkwkVLiNY6NtbTwBPrc/PApWnnXq46MXKmaVzszg5wsJf+mKxkZY1lJTxC9nYB+jNdmh2gG1pFUlhWQS6K3LnsQVQAFpeBiQmnlfAIefokaYI6tMlPMiylSvWLM1YIHFR3rsNn6hJweSEHQk6bwOaG0yV1g9bSsjOmcDINt7DiR7Asg9TY3wN2d9wKkdtaveJPSEoRrkASNVYHllcSvtKmaRldGJsIWhht1mebQLePwbgIGykJ0q0/5bJSCnHMUdZleqYX6BmXb91y+uM7HXDnJ5Aaz4DmCerv/eSqbbvaepFB85PnaJ0yVvpiiMatq6S4Cdl46ieUZCs7gaOxrFgXGFowZXZy+igmWlgBJu3pdjcJ0SUik5PAwlJ3ppRMjqJijCvR0c01PdsrFaTLn5An//FNUgiiGoXiScB1XnBRPv+8oZ8hCyE048oV4EWDNEBFoNUGNtf9cZE2g5DrJCTRuzo7A9YfB+mMy4usat44Ofnm5kn6Y0oe1q6645QtGZl9BaC/0GtnGzjY979bs1H7R4hngE+szrYRNOmjERlTuk66raz6A0p3hFoH3auR2z9CSIFQK7G5K496B7aEhKxsZMSfFFM1zplp4IRwYgkF72YTGB+/cEO2gOmTMNhSdrlyJotst9w1FI0jq+OmuSpJIYSkUr/H/3K4N4/RtAzOB9MCtxq9WCEHvLx2ts3ShPXK2Ry5Q6Uzm1iYT02mQyQkhqQI4bRNbJSZfD754sbGRVor7x4TIdyALvSxBXbh+tR4RRuDyJLa5efLCykBZGwY7RN3HWLKdrh2o0n1uiavFlWysiZCNO0Hqxp0hqPrUqvxTd10mnqhKyfr5mS04d2EZAliBDJV7WrwPDzodUflSwbB1sZW+kHBhMiuVLfzqV0+NpacXhzS6dJxzgbV1E/OLCvlsnTguYSTuc8vmOuQrWfA8bGZEJPMPC1ELg51XsB0pEDWTbHEdhxhwkfJ7Fi9LJorQYrN7HWCKRYsLKZ3lzxWB4Dssky+n4i+cs21HS4+N82jEqtzRa4znpMTYHvLfSwhtGFkWDQ0v/MQms2VpQjldC5JVVgHkm9QJ9Aam2kCZfJNRagtOxQzylmia5tomqJhFkKCOHHEpx1BVrf5NJ3PyzWGSaZPQWdyfTLYujE+XQZyYdRzU12wShAjfvAtxLTThFCXeet2D9UIZPJykcVxW5ydK+TpCkz5fFuX7dHnJEMN6DYLcB3haizb6yEHkp16QM6U8vm0MtRF6fywbAG64O8jT5c+y5vnuAlsSaehVLhRMhLaCTY1HRn1h4CG/xiQbrf5gGPaYSJrocxlcip57qwLyqYaQTe/ms6qT39QDOie+J31ur/MZwKs4UJHCvMBB6PLSmVa9A+1j+MTM1wBz/a57nkwzlkLEU1HB7JLzGMDudaixhQlWaHD3nHLQ+rWo83mww874kn3rh4CHDLtxSX3mYRLec7ntBEoARAnh9xMS417nEYnRx/OGHnzMo5t5Sn9nu3VdWY5CmYdozYJOYFdbgQSicurfoE6q87Uq+u0tR3koEdJhT5eB/9ZF2G7X06DOa5H9uWh5zIFrMf1pI3zaYzSEELWuUtPT3YAypR03VgZQKp1KBGp11PP1RaAM3vK4SGEveRyDqRvUY3f+tppAM4B2oyrnGsuvVYu67CmvaWLIaWHm6egixSnhZQmhvDWW/pRkZCSUZSJkGgd+bMZCckf08wzBheG0UIyY6+dIBJSDK7BswYREq0jGG/njZEQJ0T9H+B9YhgtpFiSIiHF4us9uxch0Tq88fW6wdZo5D2X5SUuDuYiEP5cFldCHOeFQCTEC67iB0dCisfYSwKLkBjQvTANHkxf/x6/+VUqhru/HxIsMt7oQiBaiAuhAXzu/4WdHJT88+8WHnx3jPXGmddst94Yw0cfTGL2UsDXlw2Svv/5BD/80sT+EfOFMQBmpmq48+4E3rrteJ2H1+p6gwdCyBffHnUJCbk+/2QWN64rXy0LmQjA3uEZ3r/HeJWSZv61xRF8cz/5npJANRK3DYQQYSH7h/xdSVq//upoYRbiC+ZALCRmWL40ZR9vtZBISHaAQ2aQSUmkvZUhhDzfxjZwYnh52OgIsDof/sWbEFQz3FN9Qhq7wO+OV35cXwborwKXkRDOe95Lsb79Y+DXv4C2JY2+cbVnJRW4qm8hBPLOAfDbP3pSXlsFri1WgIp0LVLNGCKg1pFSMTLU4rDahKiWUiE3JZtv9WOI6ozo27r07nvXm0pL6sSGI4aUFNwQtSIhIagVeE+pCaEnMvp6jY2afpalL2oMpLnIXRm1xu8/kH40hntjhnHUwPzs45lcW/w+6pSakHuf7uHhHy2f9eQylgi5/WY9l7l8J3ESQhOm3uDgKyVwPLXp6fCon9fa0gjuvF0//23GfspmHeGSQpVpMvYTvQJksQmJpBSAvjKl17O9kZBiCQn6fkgkpThSggmJpORPio0MkuZ8cUAkJT9SXGSwCRlkKpwfHIOdiUOGFyHd3/STfkt9sMurlnQuGV6ERNcVtgl8yPAmRJASLYVHji8ZQYREUoojI5iQ6L7spIRYhpiRlfbaxMe+VxKdLGRkshBZjUhKD42sZORGyMvswkSCkwcZuRLyspKSFxG5xRBdfBl2F+b7K9e8vKw3KnNQNwkbZlLytgoZw8IIEUKGjZgiySjUQlTLqToxRRNRaAwZprqlX0QMjJAyuzK5R9dvIgZOiK6wFNmLT1aS59hBkdDXoO4LWD9jTRkIUPEpPMvyJaSouqaM4OvWWglC8iC1KnP8D0rEjKHzLZZyAAAAAElFTkSuQmCC",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAKtJREFUWEftl0EOgDAIBJf/P7qmRi8WzUYaNXF6boEMLKshtaaJZ2owSUGBxe5AsAgwn0FXNhFj+lQkrnKSeGmLKfCs7xCUxAz28UAkiGQj8NqirtiTaxpuDj4WXFIXunGXipfqfy1uJ+7k8RpvxWSEPd7UkBR4t7X7OwiuJNzNk3hdRrCZYx79F+lwcpFQYD7pEOxcmEFUfOEEiOQ5kRQMGS8uwFufQvBrBBe/KL3FjSrIXQAAAABJRU5ErkJggg=="},6433:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(9767)),i=n(r(9698)),a=function(){function t(t){this._gl=t,this._maskShader=new i.default(this._gl),this._backgroundShader=new o.default(this._gl)}return t.prototype.setTexture=function(t){this._backgroundShader.setTexture(t)},t.prototype.setPositionVertices=function(t){this._maskShader.setPositionVertices(t)},t.prototype.setPrimitiveType=function(t){this._maskShader.setPrimitiveType(t)},t.prototype.setPathCount=function(t){this._maskShader.setPathCount(t)},t.prototype.setViewportTransform=function(t){this._maskShader.setViewportTransform(t),this._backgroundShader.setViewportTransform(t)},t.prototype.setLocalTransform=function(t){this._maskShader.setLocalTransform(t),this._backgroundShader.setLocalTransform(t)},t.prototype.setDimension=function(t,e){this._backgroundShader.setDimension(t,e)},t.prototype.draw=function(){var t=this._gl;t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,255),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),this._maskShader.draw(),t.enable(t.STENCIL_TEST),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),this._backgroundShader.draw(),t.disable(t.STENCIL_TEST)},t}();e.default=a},8411:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(2525)),s=r(2920),u=i(r(764)),c=i(r(9335)),l=r(4148),h=function(t){function e(e){var r=t.call(this,e,{VERTEX_SHADER:u.default,FRAGMENT_SHADER:c.default})||this;return r._gl=e,r}return o(e,t),e.prototype.initDefaultUniforms=function(){},e.prototype.initAttributes=function(){var t=[1,1,-1,1,1,-1,-1,-1];this.setPrimitiveType(this._gl.TRIANGLE_STRIP),this.setPathCount(t.length/2),l.TypeChecker.checkExists(this.attributeMap.aVertexPosition).array=new Float32Array(t)},e.prototype.initUniforms=function(){this.uniformMap.uOffset=(0,s.initUniform2fv)(this._gl,this._program,"uOffset"),this.uniformMap.uPitch=(0,s.initUniform2fv)(this._gl,this._program,"uPitch"),this.uniformMap.uDevicePixelRatio=(0,s.initUniform1fv)(this._gl,this._program,"uDevicePixelRatio")},e.prototype.setGridDimension=function(t){var e=t.zoomScale,r=t.offsetX,n=t.offsetY,o=t.pitch,i=void 0===o?10:o,a=t.canvasClientHeight,s=i*e;l.TypeChecker.checkExists(this.uniformMap.uOffset).value=[r,n+s-a%s],l.TypeChecker.checkExists(this.uniformMap.uPitch).value=[s,s],l.TypeChecker.checkExists(this.uniformMap.uDevicePixelRatio).value=[window.devicePixelRatio]},e}(a.default);e.default=h},9767:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(2525)),s=r(2920),u=i(r(7016)),c=i(r(8785)),l=r(4148),h=function(t){function e(e){var r=t.call(this,e,{VERTEX_SHADER:u.default,FRAGMENT_SHADER:c.default})||this;return r._gl=e,r._maskPath=[],r}return o(e,t),e.prototype.initAttributes=function(){this.attributeMap.aVertexTextureCoords=(0,s.initVertexAttr)(this._gl,this._program,"aVertexTextureCoords",{numOfComp:2}),this._maskPath=[0,0,1,0,1,1,0,1],this.setPrimitiveType(this._gl.TRIANGLE_FAN),this.setPathCount(this._maskPath.length/2),this.attributeMap.aVertexTextureCoords.array=new Float32Array(this._maskPath)},e.prototype.initUniforms=function(){this.uniformMap.uTexture=(0,s.initUniformTexture)(this._gl,this._program,"uTexture")},e.prototype.setTexture=function(t){l.TypeChecker.checkExists(this.uniformMap.uTexture).value=t},e.prototype.setDimension=function(t,e){var r=[0,0,t,0,t,e,0,e];l.TypeChecker.checkExists(this.attributeMap.aVertexPosition).array=new Float32Array(r)},e}(a.default);e.default=h},2525:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseShader=void 0;var a=r(2920),s=i(r(2276)),u=r(4148),c=function(){function t(t,e){this._gl=t,this.attributeMap={},this.uniformMap={},this._program=this.loadProgram(e),this.initDefaultAttributes(),this.initDefaultUniforms(),this.initAttributes(),this.initUniforms()}return t.addShaderCache=function(e,r){t.programCache.set(e,r)},t.getShaderCache=function(e){return t.programCache.get(e)},t.prototype.initDefaultAttributes=function(){this.attributeMap.aVertexPosition=(0,a.initVertexAttr)(this._gl,this._program,"aVertexPosition",{numOfComp:2})},t.prototype.initDefaultUniforms=function(){this.uniformMap.uViewportTransform=(0,a.initUniformMatrix4fv)(this._gl,this._program,"uViewportTransform"),this.uniformMap.uLocalTransform=(0,a.initUniformMatrix4fv)(this._gl,this._program,"uLocalTransform")},t.prototype.loadProgram=function(e){var r=this.constructor.name,n=t.getShaderCache(r);if(n)return n;var o=this._gl,i=u.TypeChecker.checkExists(s.createProgramFromSources(o,e,[],[],(function(){})));return t.addShaderCache(r,i),i},t.prototype.useProgram=function(){this._gl.useProgram(this._program)},t.prototype.setPrimitiveType=function(t){this._primitiveType=t},t.prototype.setPathCount=function(t){this._pathCount=t},t.prototype.setViewportTransform=function(t){u.TypeChecker.checkExists(this.uniformMap.uViewportTransform).value=t},t.prototype.setLocalTransform=function(t){u.TypeChecker.checkExists(this.uniformMap.uLocalTransform).value=t},t.prototype.setPositionVertices=function(t){u.TypeChecker.checkExists(this.attributeMap.aVertexPosition).array=t},t.prototype.draw=function(){var t=this._gl;t.useProgram(this._program),Object.values(this.attributeMap).forEach((function(t){return(0,t.apply)()})),Object.values(this.uniformMap).forEach((function(t){return(0,t.apply)()})),t.drawArrays(u.TypeChecker.checkExists(this._primitiveType),0,u.TypeChecker.checkExists(this._pathCount))},t.programCache=new Map,t}();e.BaseShader=c,e.default=c},6731:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(2525)),s=r(2920),u=i(r(2559)),c=i(r(659)),l=r(4148),h=function(t){function e(e){var r=t.call(this,e,{VERTEX_SHADER:u.default,FRAGMENT_SHADER:c.default})||this;return r._gl=e,r}return o(e,t),e.prototype.initAttributes=function(){},e.prototype.initUniforms=function(){this.uniformMap.uColor=(0,s.initUniform4fv)(this._gl,this._program,"uColor")},e.prototype.setColor=function(t){l.TypeChecker.checkExists(this.uniformMap.uColor).value=t},e}(a.default);e.default=h},8139:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(2525)),s=r(2920),u=i(r(280)),c=i(r(7086)),l=i(r(3670)),h=i(r(4930)),d=r(4148),f=function(t){function e(e,r){void 0===r&&(r="webgl");var n=this,o={webgl:u.default,webgl2:c.default},i={webgl:l.default,webgl2:h.default};return(n=t.call(this,e,{VERTEX_SHADER:o[r],FRAGMENT_SHADER:i[r]})||this)._gl=e,n}return o(e,t),e.prototype.initAttributes=function(){},e.prototype.initUniforms=function(){this.uniformMap.uColor=(0,s.initUniform4fv)(this._gl,this._program,"uColor")},e.prototype.setColor=function(t){d.TypeChecker.checkExists(this.uniformMap.uColor).value=t},e}(a.default);e.default=f},9698:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(2525)),s=i(r(3717)),u=i(r(9587)),c=function(t){function e(e){var r=t.call(this,e,{VERTEX_SHADER:s.default,FRAGMENT_SHADER:u.default})||this;return r._gl=e,r}return o(e,t),e.prototype.initUniforms=function(){},e.prototype.initAttributes=function(){},e}(a.default);e.default=c},2920:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initUniformTextures=e.initUniformTexture=e.initUniform2iv=e.initUniform4fv=e.initUniform2fv=e.initUniform1fv=e.initUniformMatrix4fv=e.initVertexAttr=void 0;var n=r(4148);e.initVertexAttr=function(t,e,r,o){var i=o.numOfComp,a={location:t.getAttribLocation(e,r),buffer:t.createBuffer(),array:new ArrayBuffer(0),apply:function(){var e=a.location,r=a.array,o=a.buffer;t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),n.TypeChecker.checkState(null!=e),t.vertexAttribPointer(e,i,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e)}};return a},e.initUniformMatrix4fv=function(t,e,r){var o={location:n.TypeChecker.checkExists(t.getUniformLocation(e,r)),value:void 0,apply:function(){t.uniformMatrix4fv(o.location,!1,n.TypeChecker.checkExists(o.value))}};return o},e.initUniform1fv=function(t,e,r){var o={location:n.TypeChecker.checkExists(t.getUniformLocation(e,r)),apply:function(){t.uniform1fv(o.location,n.TypeChecker.checkExists(o.value))},value:void 0};return o},e.initUniform2fv=function(t,e,r){var o={location:n.TypeChecker.checkExists(t.getUniformLocation(e,r)),apply:function(){t.uniform2fv(o.location,n.TypeChecker.checkExists(o.value))},value:void 0};return o},e.initUniform4fv=function(t,e,r){var o={location:n.TypeChecker.checkExists(t.getUniformLocation(e,r)),apply:function(){t.uniform4fv(o.location,n.TypeChecker.checkExists(o.value))},value:void 0};return o},e.initUniform2iv=function(t,e,r){var o={location:n.TypeChecker.checkExists(t.getUniformLocation(e,r)),apply:function(){t.uniform2iv(o.location,n.TypeChecker.checkExists(o.value))},value:void 0};return o},e.initUniformTexture=function(t,e,r){var o={location:n.TypeChecker.checkExists(t.getUniformLocation(e,r)),value:void 0,apply:function(){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.TypeChecker.checkExists(o.value)),t.uniform1i(o.location,0)}};return o},e.initUniformTextures=function(t,e,r){var o=t.getUniformLocation(e,r),i={location:n.TypeChecker.checkExists(o),value:void 0,apply:function(){for(var e=n.TypeChecker.checkExists(i.value),r=[],o=0;o<e.length;o++)r.push(o),t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_2D,e[o]);t.uniform1iv(i.location,r)}};return i}},1348:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(9950),i=n(r(7393)),a=function(){function t(t){this._renderer=t}return t.prototype.init=function(t){void 0===t&&(t=[]);var e=new Set(t),r=this._renderer.getTranslation(),n=this._renderer.getScale(),a=this._renderer.getRotation();e.has("x")&&i.default.setupSlider("#x",{value:r[0],slide:this._updatePosition(0),max:this._renderer._gl.canvas.width}),e.has("y")&&i.default.setupSlider("#y",{value:r[1],slide:this._updatePosition(1),max:this._renderer._gl.canvas.height}),e.has("z")&&i.default.setupSlider("#z",{value:r[2],slide:this._updatePosition(2),max:this._renderer._gl.canvas.height}),e.has("angleX")&&i.default.setupSlider("#angleX",{value:(0,o.radToDeg)(a[0]),slide:this._updateRotation(0),max:90}),e.has("angleY")&&i.default.setupSlider("#angleY",{value:(0,o.radToDeg)(a[1]),slide:this._updateRotation(1),max:360}),e.has("angleZ")&&i.default.setupSlider("#angleZ",{value:(0,o.radToDeg)(a[2]),slide:this._updateRotation(2),max:360}),e.has("scaleX")&&i.default.setupSlider("#scaleX",{value:n[0],slide:this._updateScale(0),min:1,max:40,step:.01,precision:2}),e.has("scaleY")&&i.default.setupSlider("#scaleY",{value:n[1],slide:this._updateScale(1),min:1,max:40,step:.01,precision:2}),e.has("scaleZ")&&i.default.setupSlider("#scaleZ",{value:n[2],slide:this._updateScale(2),min:1,max:40,step:.01,precision:2}),e.has("scaleXY")&&i.default.setupSlider("#scaleXY",{value:n[2],slide:this._updateXYScale(),min:.03,max:5,step:.01,precision:2})},t.prototype._updatePosition=function(t){var e=this;return function(r,n){e._renderer.getTranslation()[t]=n.value,e._renderer.drawScene()}},t.prototype._updateRotation=function(t){var e=this;return function(r,n){var i=e._renderer.getRotation(),a=n.value,s=(0,o.degToRad)(a);i[t]=s,e._renderer.drawScene()}},t.prototype._updateScale=function(t){var e=this;return function(r,n){e._renderer.getScale()[t]=n.value,e._renderer.drawScene()}},t.prototype._updateXYScale=function(){var t=this;return function(e,r){var n=t._renderer.getScale();n[0]=r.value,n[1]=r.value,t._renderer.drawScene()}},t}();e.default=a},9950:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.m4=e.uuidv4=e.randomInt=e.degToRad=e.radToDeg=void 0,e.radToDeg=function(t){return 180*t/Math.PI},e.degToRad=function(t){return t*Math.PI/180},e.randomInt=function(t){return Math.floor(Math.random()*t)},e.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},e.m4={projection:function(t,e,r){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/r,0,-1,1,0,1]},orthographic:function(t,e,r,n,o,i){return[2/(e-t),0,0,0,0,2/(n-r),0,0,0,0,2/(o-i),0,(t+e)/(t-e),(r+n)/(r-n),(o+i)/(o-i),1]},multiply:function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],d=t[10],f=t[11],p=t[12],_=t[13],m=t[14],g=t[15],y=e[0],v=e[1],x=e[2],b=e[3],E=e[4],S=e[5],T=e[6],w=e[7],A=e[8],k=e[9],P=e[10],R=e[11],C=e[12],M=e[13],O=e[14],I=e[15];return[y*r+v*a+x*l+b*p,y*n+v*s+x*h+b*_,y*o+v*u+x*d+b*m,y*i+v*c+x*f+b*g,E*r+S*a+T*l+w*p,E*n+S*s+T*h+w*_,E*o+S*u+T*d+w*m,E*i+S*c+T*f+w*g,A*r+k*a+P*l+R*p,A*n+k*s+P*h+R*_,A*o+k*u+P*d+R*m,A*i+k*c+P*f+R*g,C*r+M*a+O*l+I*p,C*n+M*s+O*h+I*_,C*o+M*u+O*d+I*m,C*i+M*c+O*f+I*g]},unit:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},translation:function(t,e,r){return[1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1]},xRotation:function(t){var e=Math.cos(t),r=Math.sin(t);return[1,0,0,0,0,e,r,0,0,-r,e,0,0,0,0,1]},yRotation:function(t){var e=Math.cos(t),r=Math.sin(t);return[e,0,-r,0,0,1,0,0,r,0,e,0,0,0,0,1]},zRotation:function(t){var e=Math.cos(t),r=Math.sin(t);return[e,r,0,0,-r,e,0,0,0,0,1,0,0,0,0,1]},scaling:function(t,e,r){return[t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1]},translate:function(t,r,n,o){return e.m4.multiply(t,e.m4.translation(r,n,o))},xRotate:function(t,r){return e.m4.multiply(t,e.m4.xRotation(r))},yRotate:function(t,r){return e.m4.multiply(t,e.m4.yRotation(r))},zRotate:function(t,r){return e.m4.multiply(t,e.m4.zRotation(r))},scale:function(t,r,n,o){return e.m4.multiply(t,e.m4.scaling(r,n,o))}}},2276:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createProgramFromSources=e.resizeCanvasToDisplaySize=void 0;var n=r(4148);function o(t){var e=window;e.console&&(e.console.error?e.console.error(t):e.console.log&&e.console.log(t))}function i(t,e){void 0===e&&(e="");var r=Array.from(e.matchAll(/ERROR:\s*\d+:(\d+)/gi)),n=new Map(r.map((function(t,n){var o=parseInt(t[1]),i=r[n+1],a=i?i.index:e.length;return[o-1,t.index?e.substring(t.index,a):"Unknown Message"]})));return t.split("\n").map((function(t,e){var r=n.get(e);return"".concat(e+1,": ").concat(t).concat(r?"\n\n^^^ ".concat(r):"")})).join("\n")}function a(t,e,r,a){var s,u=a||o,c=n.TypeChecker.checkExists(t.createShader(r));if(t.shaderSource(c,e),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS)){var l=null!==(s=t.getShaderInfoLog(c))&&void 0!==s?s:void 0;return u("Error compiling shader: ".concat(l,"\n").concat(i(e,l))),void t.deleteShader(c)}return c}e.resizeCanvasToDisplaySize=function(t,e){void 0===e&&(e=1);var r=t.clientWidth*e|0,n=t.clientHeight*e|0;return(t.width!==r||t.height!==n)&&(t.width=r,t.height=n,!0)},e.createProgramFromSources=function(t,e,r,s,u){var c,l=[];return e.VERTEX_SHADER&&(c=a(t,e.VERTEX_SHADER,t.VERTEX_SHADER,u))&&l.push(c),e.FRAGMENT_SHADER&&(c=a(t,e.FRAGMENT_SHADER,t.FRAGMENT_SHADER,u))&&l.push(c),function(t,e,r,a,s){var u=s||o,c=n.TypeChecker.checkExists(t.createProgram());if(e.forEach((function(e){t.attachShader(c,e)})),r&&r.forEach((function(e,r){t.bindAttribLocation(c,a?a[r]:r,e)})),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS)){var l=t.getProgramInfoLog(c),h=e.map((function(e){var r=i(n.TypeChecker.checkExists(t.getShaderSource(e))),o=t.getShaderParameter(e,t.SHADER_TYPE);return o===t.VERTEX_SHADER?"VERTEX_SHADER:\n".concat(r):o===t.FRAGMENT_SHADER?"FRAGMENT_SHADER:\n".concat(r):"UnknownShader:\n".concat(r)})).join("\n");return u("Error in program linking: ".concat(l,"\n").concat(h)),void t.deleteProgram(c)}return c}(t,l,r,s,u)}},6086:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=void 0,e.clamp=function(t,e,r){return Math.min(Math.max(t,e),r)}},4148:function(t,e){"use strict";var r=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.TypeChecker=void 0;var n=function(){function t(){}return t.checkState=function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if(!e)throw new Error(null==n?"invalid state":t.format.apply(t,r([n],o,!1)))},t.checkEquals=function(e,n,o){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];if(e!==n)throw new Error(null==o?t.format("{} != {}",t.stringify(e),t.stringify(n)):t.format.apply(t,r([o],i,!1)))},t.checkExists=function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];if(null==e)throw new Error(null==n?"argument is null":t.format.apply(t,r([n],o,!1)));return e},t.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=0;return t.replace(/\{}/g,(function(){return n<e.length?e[n++]:"{}"}))},t.stringify=function(t){if(null==t||"symbol"==typeof t)return String(t);try{return JSON.stringify(t)}catch(e){return String(t)}},t}();e.TypeChecker=n},561:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="#define MAX_TEXTURE_IMAGE_UNITS 16\nprecision mediump float;\n\nvarying vec4 vVertexColor;\nvarying float vTextureIndex;\nvarying vec2 vVertexTextureCoords;\n\nuniform sampler2D uTextures[MAX_TEXTURE_IMAGE_UNITS];\n\nvoid main() {\n  if (vTextureIndex < 0.0) {\n    gl_FragColor = vVertexColor;\n    return;\n  }\n  int v = int(vTextureIndex);\n  for (int i = 0; i < MAX_TEXTURE_IMAGE_UNITS; i++) {\n    if (i != v) {\n      continue;\n    }\n    gl_FragColor = texture2D(uTextures[i], vVertexTextureCoords);\n    return;\n  }\n}\n"},4092:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nattribute vec4 aVertexPosition;\nattribute vec4 aVertexColor;\nattribute float aTextureIndex;\nattribute vec2 aVertexTextureCoords;\n\n// A matrix to transform the positions by\nuniform mat4 uViewportTransform;\n\nvarying vec4 vVertexColor;\nvarying float vTextureIndex;\nvarying vec2 vVertexTextureCoords;\n\n// all shaders have a main function\nvoid main() {\n  vVertexColor = aVertexColor;\n  vTextureIndex = aTextureIndex;\n  vVertexTextureCoords = aVertexTextureCoords;\n  // Multiply the position by the matrix.\n  gl_Position = uViewportTransform * aVertexPosition;\n}\n"},9335:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="precision mediump float;\n\nuniform float uDevicePixelRatio;\nuniform vec2 uOffset;\nuniform vec2 uPitch;\n\nvoid main() {\n  if (int(mod(gl_FragCoord.x / uDevicePixelRatio - uOffset[0], uPitch[0])) == 0 ||\n      int(mod(gl_FragCoord.y / uDevicePixelRatio + uOffset[1], uPitch[1])) == 0) {\n    gl_FragColor = vec4(0.4, 0.4, 0.4, 0.5);\n  } else {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n  }\n}\n"},764:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="attribute vec4 aVertexPosition;\n\nvoid main() {\n  gl_Position = aVertexPosition;\n}\n"},8785:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="precision mediump float;\n\nvarying vec2 vVertexTextureCoords;\n\nuniform sampler2D uTexture;\n\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vVertexTextureCoords);\n}\n"},7016:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nattribute vec4 aVertexPosition;\nattribute vec2 aVertexTextureCoords;\n\n// A matrix to transform the positions by\nuniform mat4 uViewportTransform;\nuniform mat4 uLocalTransform;\n\nvarying vec2 vVertexTextureCoords;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = uViewportTransform * uLocalTransform * aVertexPosition;\n  vVertexTextureCoords = aVertexTextureCoords;\n}\n"},659:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="precision mediump float;\n\nvoid main() {\n  gl_FragColor = vec4(0.8, 0.8, 0.8, 1.0);\n}\n"},2559:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nattribute vec4 aVertexPosition;\n\n// A matrix to transform the positions by\nuniform mat4 uViewportTransform;\nuniform mat4 uLocalTransform;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = uViewportTransform * uLocalTransform * aVertexPosition;\n}\n"},3670:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="precision mediump float;\n\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n"},280:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nattribute vec4 aVertexPosition;\n\n// A matrix to transform the positions by\nuniform mat4 uViewportTransform;\nuniform mat4 uLocalTransform;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = uViewportTransform * uLocalTransform * aVertexPosition;\n}\n"},4930:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="precision mediump float;\n\nuniform vec4 u_color;\n\n// we need to declare an output for the fragment shader\nout vec4 outColor;\n\nvoid main() {\n  outColor = u_color;\n}\n"},7086:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nin vec4 a_position;\n\n// A matrix to transform the positions by\nuniform mat4 u_matrix;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = u_matrix * a_position;\n}\n"},9587:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="precision mediump float;\nvoid main() {\n  // The transparent background is for showing the lower layers.\n  gl_FragColor = vec4(0, 0, 0, 0);\n}\n"},3717:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});const n="// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nattribute vec4 aVertexPosition;\n\n// A matrix to transform the positions by\nuniform mat4 uViewportTransform;\nuniform mat4 uLocalTransform;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = uViewportTransform * uLocalTransform * aVertexPosition;\n}\n"},7393:function(t,e){var r,n,o;n=this,o=function(){"use strict";const t=(e={},window.hackedParams&&Object.keys(window.hackedParams).forEach((function(t){e[t]=window.hackedParams[t]})),window.location.search&&window.location.search.substring(1).split("&").forEach((function(t){var r=t.split("=").map((function(t){return decodeURIComponent(t)}));e[r[0]]=r[1]})),e);var e;function r(e,r){var n=r.precision||0,o=r.min||0,i=r.step||1,a=r.value||0,s=r.max||1,u=r.slide,c=t["ui-"+r.name]||r.name,l=void 0===r.uiPrecision?n:r.uiPrecision,h=r.uiMult||1;o/=i,s/=i,a/=i,e.innerHTML=`\n      <div class="gman-widget-outer">\n        <div class="gman-widget-label">${c}</div>\n        <div class="gman-widget-value"></div>\n        <input class="gman-widget-slider" type="range" min="${o}" max="${s}" value="${a}" />\n      </div>\n    `;var d=e.querySelector(".gman-widget-value"),f=e.querySelector(".gman-widget-slider");function p(t){d.textContent=(t*i*h).toFixed(l)}function _(t){var e=parseInt(t.target.value);p(e),u(t,{value:e*i})}return p(a),f.addEventListener("input",_),f.addEventListener("change",_),{elem:e,updateValue:t=>{t/=i,f.value=t,p(t)}}}function n(t){return r(document.createElement("div"),t)}var o=0;function i(){return"__widget_"+o++}function a(e){const r=document.createElement("div");r.className="gman-widget-outer";const n=document.createElement("label"),o=i();n.setAttribute("for",o),n.textContent=t["ui-"+e.name]||e.name,n.className="gman-checkbox-label";const a=document.createElement("input");return a.type="checkbox",a.checked=e.value,a.id=o,a.className="gman-widget-checkbox",r.appendChild(n),r.appendChild(a),a.addEventListener("change",(function(t){e.change(t,{value:t.target.checked})})),{elem:r,updateValue:function(t){a.checked=!!t}}}function s(){}const u={slider:function(t,e){const r=e.change||s;return e.name=e.name||e.key,e.value=t[e.key],e.slide=e.slide||function(n,o){t[e.key]=o.value,r()},n(e)},checkbox:function(t,e){const r=e.change||s;return e.value=t[e.key],e.name=e.name||e.key,e.change=function(n,o){t[e.key]=o.value,r()},a(e)},option:function(e,r){const n=r.change||s;return r.value=e[r.key],r.name=r.name||r.key,r.change=function(t,o){e[r.key]=o.value,n()},function(e){const r=document.createElement("div");r.className="gman-widget-outer";const n=document.createElement("label"),o=i();n.setAttribute("for",o),n.textContent=t["ui-"+e.name]||e.name,n.className="gman-widget-label";const a=document.createElement("select");return e.options.forEach(((r,n)=>{const o=document.createElement("option");o.textContent=t["ui-"+r]||r,o.value=n,o.selected=n===e.value,a.appendChild(o)})),a.className="gman-widget-select",r.appendChild(n),r.appendChild(a),a.addEventListener("change",(function(t){e.change(t,{value:a.selectedIndex})})),{elem:r,updateValue:function(t){a.selectedIndex=t}}}(r)}};return{setupUI:function(t,e,r){const n={};return r.forEach((function(r){const o=u[r.type](e,r);t.appendChild(o.elem),n[r.key]=o})),n},updateUI:function(t,e){Object.keys(t).forEach((r=>{t[r].updateValue(e[r])}))},setupSlider:function(t,e){var n=document.querySelector(t);if(n)return e.name||(e.name=t.substring(1)),r(n,e)},makeSlider:n,makeCheckbox:a}},void 0===(r=function(){return o.call(n)}.apply(e,[]))||(t.exports=r)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(5459)})();