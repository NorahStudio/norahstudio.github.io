(()=>{"use strict";var e,t={3117:function(e,t){var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createScene=void 0;var i=[1,0,0],a=[0,1,0],o=[0,0,1],n=[1,1,0],s=[.5,0,1],c=[0,1,1],l=[1,.5,0];t.createScene=function(){var e,t;return{unitPixel:50,geometry:new Float32Array((t=50,g.map((function(e){return e*t})))),color:new Float32Array((e=r(r(r(r(r(r(r(r(r(r(r(r([],i,!0),l,!0),n,!0),a,!0),c,!0),o,!0),s,!0),o,!0),c,!0),a,!0),n,!0),l,!0),e))}};var h=[-.5,-.5,-.5],u=[-.5,.5,-.5],d=[.5,.5,-.5],f=[-.5,-.5,.5],p=[-.5,.5,.5],v=[.5,.5,.5],g=(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r([],h,!0),u,!0),u,!0),d,!0),d,!0),h,!0),f,!0),p,!0),p,!0),v,!0),v,!0),f,!0),h,!0),f,!0),u,!0),p,!0),d,!0),v,!0),r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r([],h,!0),u,!0),d,!0),f,!0),v,!0),p,!0),h,!0),d,!0),v,!0),h,!0),v,!0),f,!0),u,!0),p,!0),v,!0),u,!0),v,!0),d,!0),h,!0),f,!0),p,!0),h,!0),p,!0),u,!0))},7361:(e,t,r)=>{var i=r(4329),a=r(5566),o=window;o._debug||(o._debug={}),function(){var e=document.getElementById("canvas");document.body.appendChild(e);var t=new a.BrickRenderer({canvas:e,isOrthographic:!0});t.drawScene(),(0,i.setupUi)({renderer:t,canvasWidth:e.width,canvasHeight:e.height})}()},5566:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BrickRenderer=void 0;var a=r(9950),o=r(2276),n=r(4148),s=i(r(7205)),c=i(r(2143)),l=r(3793),h=r(3117),u=function(){function e(e){var t=e.canvas,r=e.isOrthographic;this.canvas=t;var i=this._updateProjection({isOrthographic:r,rotation:[(0,a.degToRad)(40),(0,a.degToRad)(25),(0,a.degToRad)(0)]}),o=i.projection,u=i.projectionMatrix;this.projection=o,this.projectionMatrix=u;var d=this.projection,f=d.translation,p=d.rotation,v=d.scale;this._translation=f,this._rotation=p,this._scale=v;var g=n.TypeChecker.checkExists(t.getContext("webgl",{antialias:!0}));this.gl=g,this.extAngleInstancedArrays=n.TypeChecker.checkExists(g.getExtension("ANGLE_instanced_arrays"));var _=(0,l.createProgram)(g,s.default,c.default);this.program=_;var m=(0,h.createScene)(),y=m.geometry,A=m.color,b=m.unitPixel;this.geometryLength=y.length,this.unitPixel=b,this.geometryPosLocation=g.getAttribLocation(_,"a_geometryPos"),this.geometryPosBuffer=n.TypeChecker.checkExists(g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,this.geometryPosBuffer),g.bufferData(g.ARRAY_BUFFER,y,g.STATIC_DRAW),this.colorLocation=g.getAttribLocation(_,"a_color"),this.colorBuffer=n.TypeChecker.checkExists(g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,this.colorBuffer),g.bufferData(g.ARRAY_BUFFER,A,g.STATIC_DRAW),this.numInstances=12,this.placeData=new Float32Array(16*this.numInstances),this.places=[];for(var R=0;R<this.numInstances;++R){var x=16*R*4;this.places.push(new Float32Array(this.placeData.buffer,x,16))}this.positionLocation=g.getAttribLocation(_,"a_postion"),this.positionBuffer=n.TypeChecker.checkExists(g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,this.positionBuffer),g.bufferData(g.ARRAY_BUFFER,A,g.STATIC_DRAW),g.bufferData(g.ARRAY_BUFFER,this.placeData.byteLength,g.DYNAMIC_DRAW),this.matrixLocation=n.TypeChecker.checkExists(g.getUniformLocation(_,"u_matrix"))}return e.prototype.isOrthographic=function(){return"orthographic"===this.projection.type},e.prototype.updateProjection=function(e){var t=this._updateProjection({isOrthographic:e,rotation:this.rotation}),r=t.projection,i=t.projectionMatrix;this.projection=r,this.projectionMatrix=i;var a=this.projection,o=a.translation,n=a.rotation,s=a.scale;this._translation[0]=o[0],this._translation[1]=o[1],this._translation[2]=o[2],this._rotation[0]=n[0],this._rotation[1]=n[1],this._rotation[2]=n[2],this._scale[0]=s[0],this._scale[1]=s[1],this._scale[2]=s[2]},e.prototype._updateProjection=function(e){var t=e.isOrthographic,r=e.rotation,i=this.canvas,o=t?{type:"orthographic",translation:[i.clientWidth/2,i.clientHeight/2,0],rotation:r,scale:[1,1,1]}:{type:"perspective",translation:[i.clientWidth/2,i.clientHeight/2,-400],rotation:r,scale:[1,1,1],fieldOfViewRadians:(0,a.degToRad)(100)};switch(o.type){case"orthographic":return{projection:o,projectionMatrix:a.m4.projection(this.canvas.clientWidth,this.canvas.clientHeight,4e3)};case"perspective":var n=o.fieldOfViewRadians,s=i.clientWidth/i.clientHeight,c=a.m4.perspective(n,s,1,2e3);return{projection:o,projectionMatrix:c=a.m4.translate(c,i.clientWidth/-2,i.clientHeight/-2,0)};default:throw new Error}},Object.defineProperty(e.prototype,"translation",{get:function(){return this._translation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),e.prototype.drawScene=function(){var e=this,t=this.gl,r=this.extAngleInstancedArrays;(0,o.resizeCanvasToDisplaySize)(this.canvas),t.viewport(0,0,this.canvas.width,this.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.useProgram(this.program),t.enableVertexAttribArray(this.geometryPosLocation),t.bindBuffer(t.ARRAY_BUFFER,this.geometryPosBuffer);var i=3,n=t.FLOAT,s=!1,c=0;t.vertexAttribPointer(this.geometryPosLocation,i,n,s,c,0),this.places.forEach((function(t,r){a.m4.translation2(r*Math.SQRT2*e.unitPixel/2,(r%2?-1:1)*Math.SQRT2*e.unitPixel/4,0,t),a.m4.zRotate2(t,(0,a.degToRad)(135+180*r),t)})),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.placeData);for(var l=0;l<4;++l){var h=this.positionLocation+l;t.enableVertexAttribArray(h);var u=16*l;t.vertexAttribPointer(h,4,t.FLOAT,!1,64,u),r.vertexAttribDivisorANGLE(h,1)}t.enableVertexAttribArray(this.colorLocation),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),i=3,n=t.FLOAT,s=!1,c=0,t.vertexAttribPointer(this.colorLocation,i,n,s,c,0),r.vertexAttribDivisorANGLE(this.colorLocation,1);var d=a.m4.translate(this.projectionMatrix,this._translation[0],this._translation[1],this._translation[2]);d=a.m4.xRotate(d,this._rotation[0]),d=a.m4.yRotate(d,this._rotation[1]),d=a.m4.zRotate(d,this._rotation[2]),d=a.m4.scale(d,this._scale[0],this._scale[1],this._scale[2]),t.uniformMatrix4fv(this.matrixLocation,!1,d);var f=t.TRIANGLES,p=this.geometryLength/3,v=this.numInstances;r.drawArraysInstancedANGLE(f,0,p,v)},e}();t.BrickRenderer=u},4329:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setupUi=void 0;var a=r(9950),o=i(r(7393));t.setupUi=function(e){var t=e.renderer,r=e.canvasWidth,i=e.canvasHeight,n=t.translation,s=t.rotation,c=document.getElementById("ui"),l=o.default.makeCheckbox({name:"Orthographic projection",value:t.isOrthographic(),change:function(e,r){t.updateProjection(r.value),t.drawScene()}}).elem;function h(e){return function(r,i){n[e]=i.value,t.drawScene()}}function u(e){return function(r,i){var o=(0,a.degToRad)(i.value);s[e]=o,t.drawScene()}}null==c||c.prepend(l),o.default.setupSlider("#x",{name:"Viewport X",value:n[0],slide:h(0),max:r}),o.default.setupSlider("#y",{name:"Viewport Y",value:n[1],slide:h(1),max:i}),o.default.setupSlider("#angleX",{name:"Viewport angle X",value:(0,a.radToDeg)(s[0]),slide:u(0),min:-360,max:360}),o.default.setupSlider("#angleY",{name:"Viewport angle Y",value:(0,a.radToDeg)(s[1]),slide:u(1),min:-360,max:360}),o.default.setupSlider("#angleZ",{name:"Viewport angle Z",value:(0,a.radToDeg)(s[2]),slide:u(2),min:-360,max:360})}},3793:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=t.createProgram=void 0;var i=r(4148);function a(e,t,r){var a=i.TypeChecker.checkExists(e.createShader(r));return e.shaderSource(a,t),e.compileShader(a),a}t.createProgram=function(e,t,r){var o=i.TypeChecker.checkExists(e.createProgram()),n=a(e,t,e.VERTEX_SHADER),s=a(e,r,e.FRAGMENT_SHADER);e.attachShader(o,n),e.deleteShader(n),e.attachShader(o,s),e.deleteShader(s),e.linkProgram(o);var c=e.getProgramInfoLog(o);return c&&console.log(c),(c=e.getShaderInfoLog(n))&&console.log(c),(c=e.getShaderInfoLog(s))&&console.log(c),o},t.loadImage=function(e){var t=new Image;return t.src=e,new Promise((function(e){t.addEventListener("load",(function(){e(t)}))}))}},2143:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});const i="precision mediump float;\n\n// Passed in from the vertex shader.\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = v_color;\n}\n"},7205:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});const i="attribute vec4 a_geometryPos;\nattribute vec4 a_color;\nattribute mat4 a_postion;\n\nuniform mat4 u_matrix;\n\nvarying vec4 v_color;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = u_matrix * a_postion * a_geometryPos;\n\n  // Pass the color to the fragment shader.\n  v_color = a_color;\n}\n"}},r={};function i(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,r,a,o)=>{if(!r){var n=1/0;for(h=0;h<e.length;h++){for(var[r,a,o]=e[h],s=!0,c=0;c<r.length;c++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](r[c])))?r.splice(c--,1):(s=!1,o<n&&(n=o));if(s){e.splice(h--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[r,a,o]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={954:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[n,s,c]=r,l=0;if(n.some((t=>0!==e[t]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(c)var h=c(i)}for(t&&t(r);l<n.length;l++)o=n[l],i.o(e,o)&&e[o]&&e[o][0](),e[n[l]]=0;return i.O(h)},r=self.webpackChunkenjoy_life3000=self.webpackChunkenjoy_life3000||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=i.O(void 0,[258],(()=>i(7361)));a=i.O(a)})();